(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[612],{612:(gt,ke,E)=>{"use strict";E.r(ke),E.d(ke,{LoaderModule:()=>jr});var Q=E(9808),i=E(1223),ve=E(2076),N=E(8306),ce=E(4742),Ce=E(8421),Ae=E(7669),Re=E(5403),y=E(3268),fe=E(1810),pe=E(4004);let ge=(()=>{class t{constructor(e,r){this._renderer=e,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(e,r){this._renderer.setProperty(this._elementRef.nativeElement,e,r)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(i.Qsj),i.Y36(i.SBq))},t.\u0275dir=i.lG2({type:t}),t})(),K=(()=>{class t extends ge{}return t.\u0275fac=function(){let n;return function(r){return(n||(n=i.n5z(t)))(r||t)}}(),t.\u0275dir=i.lG2({type:t,features:[i.qOj]}),t})();const J=new i.OlP("NgValueAccessor"),Oe={provide:J,useExisting:(0,i.Gpc)(()=>me),multi:!0},Ge=new i.OlP("CompositionEventMode");let me=(()=>{class t extends ge{constructor(e,r,o){super(e,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=(0,Q.q)()?(0,Q.q)().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(i.Qsj),i.Y36(i.SBq),i.Y36(Ge,8))},t.\u0275dir=i.lG2({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,r){1&e&&i.NdJ("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[i._Bn([Oe]),i.qOj]}),t})();function te(t){return null==t||0===t.length}function ie(t){return null!=t&&"number"==typeof t.length}const A=new i.OlP("NgValidators"),l=new i.OlP("NgAsyncValidators"),a=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class u{static min(n){return t=n,n=>{if(te(n.value)||te(t))return null;const e=parseFloat(n.value);return!isNaN(e)&&e<t?{min:{min:t,actual:n.value}}:null};var t}static max(n){return t=n,n=>{if(te(n.value)||te(t))return null;const e=parseFloat(n.value);return!isNaN(e)&&e>t?{max:{max:t,actual:n.value}}:null};var t}static required(n){return te(n.value)?{required:!0}:null}static requiredTrue(n){return!0===n.value?null:{required:!0}}static email(n){return te((t=n).value)||a.test(t.value)?null:{email:!0};var t}static minLength(n){return t=n,n=>te(n.value)||!ie(n.value)?null:n.value.length<t?{minlength:{requiredLength:t,actualLength:n.value.length}}:null;var t}static maxLength(n){return t=n,n=>ie(n.value)&&n.value.length>t?{maxlength:{requiredLength:t,actualLength:n.value.length}}:null;var t}static pattern(n){return function(t){if(!t)return m;let n,e;return"string"==typeof t?(e="","^"!==t.charAt(0)&&(e+="^"),e+=t,"$"!==t.charAt(t.length-1)&&(e+="$"),n=new RegExp(e)):(e=t.toString(),n=t),r=>{if(te(r.value))return null;const o=r.value;return n.test(o)?null:{pattern:{requiredPattern:e,actualValue:o}}}}(n)}static nullValidator(n){return null}static compose(n){return U(n)}static composeAsync(n){return P(n)}}function m(t){return null}function X(t){return null!=t}function j(t){const n=(0,i.QGY)(t)?(0,ve.D)(t):t;return(0,i.CqO)(n),n}function d(t){let n={};return t.forEach(e=>{n=null!=e?Object.assign(Object.assign({},n),e):n}),0===Object.keys(n).length?null:n}function F(t,n){return n.map(e=>e(t))}function Z(t){return t.map(n=>function(t){return!t.validate}(n)?n:e=>n.validate(e))}function U(t){if(!t)return null;const n=t.filter(X);return 0==n.length?null:function(e){return d(F(e,n))}}function I(t){return null!=t?U(Z(t)):null}function P(t){if(!t)return null;const n=t.filter(X);return 0==n.length?null:function(e){return function(...t){const n=(0,Ae.jO)(t),{args:e,keys:r}=(0,ce.D)(t),o=new N.y(s=>{const{length:c}=e;if(!c)return void s.complete();const V=new Array(c);let $=c,C=c;for(let z=0;z<c;z++){let ue=!1;(0,Ce.Xf)(e[z]).subscribe(new Re.Q(s,W=>{ue||(ue=!0,C--),V[z]=W},()=>$--,void 0,()=>{(!$||!ue)&&(C||s.next(r?(0,fe.n)(r,V):V),s.complete())}))}});return n?o.pipe((0,y.Z)(n)):o}(F(e,n).map(j)).pipe((0,pe.U)(d))}}function g(t){return null!=t?P(Z(t)):null}function O(t,n){return null===t?[n]:Array.isArray(t)?[...t,n]:[t,n]}function x(t){return t._rawValidators}function S(t){return t._rawAsyncValidators}function w(t){return t?Array.isArray(t)?t:[t]:[]}function b(t,n){return Array.isArray(t)?t.includes(n):t===n}function G(t,n){const e=w(n);return w(t).forEach(o=>{b(e,o)||e.push(o)}),e}function _(t,n){return w(n).filter(e=>!b(t,e))}class Y{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=I(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=g(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n){this.control&&this.control.reset(n)}hasError(n,e){return!!this.control&&this.control.hasError(n,e)}getError(n,e){return this.control?this.control.getError(n,e):null}}class L extends Y{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class M extends Y{get formDirective(){return null}get path(){return null}}class oe{constructor(n){this._cd=n}is(n){var e,r,o;return"submitted"===n?!!(null===(e=this._cd)||void 0===e?void 0:e.submitted):!!(null===(o=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===o?void 0:o[n])}}let q=(()=>{class t extends oe{constructor(e){super(e)}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(L,2))},t.\u0275dir=i.lG2({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,r){2&e&&i.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[i.qOj]}),t})(),ne=(()=>{class t extends oe{constructor(e){super(e)}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(M,10))},t.\u0275dir=i.lG2({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,r){2&e&&i.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[i.qOj]}),t})();function xe(t,n){Je(t,n),n.valueAccessor.writeValue(t.value),function(t,n){n.valueAccessor.registerOnChange(e=>{t._pendingValue=e,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&mt(t,n)})}(t,n),function(t,n){const e=(r,o)=>{n.valueAccessor.writeValue(r),o&&n.viewToModelUpdate(r)};t.registerOnChange(e),n._registerOnDestroy(()=>{t._unregisterOnChange(e)})}(t,n),function(t,n){n.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&mt(t,n),"submit"!==t.updateOn&&t.markAsTouched()})}(t,n),function(t,n){if(n.valueAccessor.setDisabledState){const e=r=>{n.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(e),n._registerOnDestroy(()=>{t._unregisterOnDisabledChange(e)})}}(t,n)}function Be(t,n,e=!0){const r=()=>{};n.valueAccessor&&(n.valueAccessor.registerOnChange(r),n.valueAccessor.registerOnTouched(r)),Le(t,n),t&&(n._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Ue(t,n){t.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(n)})}function Je(t,n){const e=x(t);null!==n.validator?t.setValidators(O(e,n.validator)):"function"==typeof e&&t.setValidators([e]);const r=S(t);null!==n.asyncValidator?t.setAsyncValidators(O(r,n.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const o=()=>t.updateValueAndValidity();Ue(n._rawValidators,o),Ue(n._rawAsyncValidators,o)}function Le(t,n){let e=!1;if(null!==t){if(null!==n.validator){const o=x(t);if(Array.isArray(o)&&o.length>0){const s=o.filter(c=>c!==n.validator);s.length!==o.length&&(e=!0,t.setValidators(s))}}if(null!==n.asyncValidator){const o=S(t);if(Array.isArray(o)&&o.length>0){const s=o.filter(c=>c!==n.asyncValidator);s.length!==o.length&&(e=!0,t.setAsyncValidators(s))}}}const r=()=>{};return Ue(n._rawValidators,r),Ue(n._rawAsyncValidators,r),e}function mt(t,n){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function je(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}const Fe="VALID",Ze="INVALID",De="PENDING",Se="DISABLED";function Xe(t){return(tt(t)?t.validators:t)||null}function vt(t){return Array.isArray(t)?I(t):t||null}function et(t,n){return(tt(n)?n.asyncValidators:t)||null}function Ct(t){return Array.isArray(t)?g(t):t||null}function tt(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class nt{constructor(n,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=n,this._rawAsyncValidators=e,this._composedValidatorFn=vt(this._rawValidators),this._composedAsyncValidatorFn=Ct(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get valid(){return this.status===Fe}get invalid(){return this.status===Ze}get pending(){return this.status==De}get disabled(){return this.status===Se}get enabled(){return this.status!==Se}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._rawValidators=n,this._composedValidatorFn=vt(n)}setAsyncValidators(n){this._rawAsyncValidators=n,this._composedAsyncValidatorFn=Ct(n)}addValidators(n){this.setValidators(G(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(G(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(_(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(_(n,this._rawAsyncValidators))}hasValidator(n){return b(this._rawValidators,n)}hasAsyncValidator(n){return b(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){this.touched=!0,this._parent&&!n.onlySelf&&this._parent.markAsTouched(n)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(n=>n.markAllAsTouched())}markAsUntouched(n={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}markAsDirty(n={}){this.pristine=!1,this._parent&&!n.onlySelf&&this._parent.markAsDirty(n)}markAsPristine(n={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}markAsPending(n={}){this.status=De,!1!==n.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!n.onlySelf&&this._parent.markAsPending(n)}disable(n={}){const e=this._parentMarkedDirty(n.onlySelf);this.status=Se,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},n),{onlySelf:!0}))}),this._updateValue(),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},n),{skipPristineCheck:e})),this._onDisabledChange.forEach(r=>r(!0))}enable(n={}){const e=this._parentMarkedDirty(n.onlySelf);this.status=Fe,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},n),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},n),{skipPristineCheck:e})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(n){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(n){this._parent=n}updateValueAndValidity(n={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Fe||this.status===De)&&this._runAsyncValidator(n.emitEvent)),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(n)}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Se:Fe}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n){if(this.asyncValidator){this.status=De,this._hasOwnPendingAsyncValidator=!0;const e=j(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:n})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(n,e={}){this.errors=n,this._updateControlsErrors(!1!==e.emitEvent)}get(n){return function(t,n,e){if(null==n||(Array.isArray(n)||(n=n.split(".")),Array.isArray(n)&&0===n.length))return null;let r=t;return n.forEach(o=>{r=r instanceof Te?r.controls.hasOwnProperty(o)?r.controls[o]:null:r instanceof rt&&r.at(o)||null}),r}(this,n)}getError(n,e){const r=e?this.get(e):this;return r&&r.errors?r.errors[n]:null}hasError(n,e){return!!this.getError(n,e)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(n)}_initObservables(){this.valueChanges=new i.vpe,this.statusChanges=new i.vpe}_calculateStatus(){return this._allControlsDisabled()?Se:this.errors?Ze:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(De)?De:this._anyControlsHaveStatus(Ze)?Ze:Fe}_anyControlsHaveStatus(n){return this._anyControls(e=>e.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n={}){this.pristine=!this._anyControlsDirty(),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}_updateTouched(n={}){this.touched=this._anyControlsTouched(),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}_isBoxedValue(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){tt(n)&&null!=n.updateOn&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){return!n&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class we extends nt{constructor(n=null,e,r){super(Xe(e),et(r,e)),this._onChange=[],this._pendingChange=!1,this._applyFormState(n),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(n,e={}){this.value=this._pendingValue=n,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(n,e={}){this.setValue(n,e)}reset(n=null,e={}){this._applyFormState(n),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){je(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){je(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(n){this._isBoxedValue(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}}class Te extends nt{constructor(n,e,r){super(Xe(e),et(r,e)),this.controls=n,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(n,e){return this.controls[n]?this.controls[n]:(this.controls[n]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(n,e,r={}){this.registerControl(n,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(n,e={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(n,e,r={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],e&&this.registerControl(n,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,e={}){this._checkAllValuesPresent(n),Object.keys(n).forEach(r=>{this._throwIfControlMissing(r),this.controls[r].setValue(n[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(n,e={}){null!=n&&(Object.keys(n).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(n[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(n={},e={}){this._forEachChild((r,o)=>{r.reset(n[o],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(n,e,r)=>(n[r]=e instanceof we?e.value:e.getRawValue(),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(e,r)=>!!r._syncPendingControls()||e);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_throwIfControlMissing(n){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[n])throw new Error(`Cannot find form control with name: ${n}.`)}_forEachChild(n){Object.keys(this.controls).forEach(e=>{const r=this.controls[e];r&&n(r,e)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(const e of Object.keys(this.controls)){const r=this.controls[e];if(this.contains(e)&&n(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(n,e,r)=>((e.enabled||this.disabled)&&(n[r]=e.value),n))}_reduceChildren(n,e){let r=n;return this._forEachChild((o,s)=>{r=e(r,o,s)}),r}_allControlsDisabled(){for(const n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(n){this._forEachChild((e,r)=>{if(void 0===n[r])throw new Error(`Must supply a value for form control with name: '${r}'.`)})}}class rt extends nt{constructor(n,e,r){super(Xe(e),et(r,e)),this.controls=n,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(n){return this.controls[n]}push(n,e={}){this.controls.push(n),this._registerControl(n),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(n,e,r={}){this.controls.splice(n,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(n,e={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(n,e,r={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),e&&(this.controls.splice(n,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(n,e={}){this._checkAllValuesPresent(n),n.forEach((r,o)=>{this._throwIfControlMissing(o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(n,e={}){null!=n&&(n.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(n=[],e={}){this._forEachChild((r,o)=>{r.reset(n[o],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(n=>n instanceof we?n.value:n.getRawValue())}clear(n={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:n.emitEvent}))}_syncPendingControls(){let n=this.controls.reduce((e,r)=>!!r._syncPendingControls()||e,!1);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_throwIfControlMissing(n){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(n))throw new Error(`Cannot find form control at index ${n}`)}_forEachChild(n){this.controls.forEach((e,r)=>{n(e,r)})}_updateValue(){this.value=this.controls.filter(n=>n.enabled||this.disabled).map(n=>n.value)}_anyControls(n){return this.controls.some(e=>e.enabled&&n(e))}_setUpControls(){this._forEachChild(n=>this._registerControl(n))}_checkAllValuesPresent(n){this._forEachChild((e,r)=>{if(void 0===n[r])throw new Error(`Must supply a value for form control at index: ${r}.`)})}_allControlsDisabled(){for(const n of this.controls)if(n.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(n){n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)}}let ot=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=i.lG2({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})(),Et=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({}),t})();const st=new i.OlP("NgModelWithFormControlWarning"),bn={provide:M,useExisting:(0,i.Gpc)(()=>qe)};let qe=(()=>{class t extends M{constructor(e,r){super(),this.validators=e,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new i.vpe,this._setValidators(e),this._setAsyncValidators(r)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Le(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const r=this.form.get(e.path);return xe(r,e),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),r}getControl(e){return this.form.get(e.path)}removeControl(e){Be(e.control||null,e,!1),je(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,r){this.form.get(e.path).setValue(r)}onSubmit(e){return this.submitted=!0,function(t,n){t._syncPendingControls(),n.forEach(e=>{const r=e.control;"submit"===r.updateOn&&r._pendingChange&&(e.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const r=e.control,o=this.form.get(e.path);r!==o&&(Be(r||null,e),o instanceof we&&(xe(o,e),e.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const r=this.form.get(e.path);(function(t,n){Je(t,n)})(r,e),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const r=this.form.get(e.path);r&&function(t,n){return Le(t,n)}(r,e)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Je(this.form,this),this._oldForm&&Le(this._oldForm,this)}_checkFormPresent(){}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(A,10),i.Y36(l,10))},t.\u0275dir=i.lG2({type:t,selectors:[["","formGroup",""]],hostBindings:function(e,r){1&e&&i.NdJ("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[i._Bn([bn]),i.qOj,i.TTD]}),t})();const wn={provide:L,useExisting:(0,i.Gpc)(()=>ut)};let ut=(()=>{class t extends L{constructor(e,r,o,s,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.update=new i.vpe,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function(t,n){if(!n)return null;let e,r,o;return Array.isArray(n),n.forEach(s=>{s.constructor===me?e=s:function(t){return Object.getPrototypeOf(t.constructor)===K}(s)?r=s:o=s}),o||r||e||null}(0,s)}set isDisabled(e){}ngOnChanges(e){this._added||this._setUpControl(),function(t,n){if(!t.hasOwnProperty("model"))return!1;const e=t.model;return!!e.isFirstChange()||!Object.is(n,e.currentValue)}(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return function(t,n){return[...n.path,t]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return t._ngModelWarningSentOnce=!1,t.\u0275fac=function(e){return new(e||t)(i.Y36(M,13),i.Y36(A,10),i.Y36(l,10),i.Y36(J,10),i.Y36(st,8))},t.\u0275dir=i.lG2({type:t,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[i._Bn([wn]),i.qOj,i.TTD]}),t})(),Un=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[[Et]]}),t})(),jt=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:st,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[Un]}),t})(),Zt=(()=>{class t{group(e,r=null){const o=this._reduceControls(e);let V,s=null,c=null;return null!=r&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(r)?(s=null!=r.validators?r.validators:null,c=null!=r.asyncValidators?r.asyncValidators:null,V=null!=r.updateOn?r.updateOn:void 0):(s=null!=r.validator?r.validator:null,c=null!=r.asyncValidator?r.asyncValidator:null)),new Te(o,{asyncValidators:c,updateOn:V,validators:s})}control(e,r,o){return new we(e,r,o)}array(e,r,o){const s=e.map(c=>this._createControl(c));return new rt(s,r,o)}_reduceControls(e){const r={};return Object.keys(e).forEach(o=>{r[o]=this._createControl(e[o])}),r}_createControl(e){return e instanceof we||e instanceof Te||e instanceof rt?e:Array.isArray(e)?this.control(e[0],e.length>1?e[1]:null,e.length>2?e[2]:null):this.control(e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:jt}),t})();var jn=E(1431),he=E(8433),Zn=E(7688),qt=E(8675),Ye=E(8466);function qn(t,n){1&t&&(i.ynx(0),i._uU(1," A file is currently loaded and used. You can "),i.TgZ(2,"a",3),i._uU(3,"run the scenarios"),i.qZA(),i._uU(4,", "),i.TgZ(5,"a",4),i._uU(6,"list all the scenarios"),i.qZA(),i._uU(7," or reset the progression using the button below. "),i.BQk())}function Hn(t,n){1&t&&i._uU(0," To start a test, you need to load a file. ")}let Yn=(()=>{class t{constructor(e){this.isRunning=e.registryUpdated.pipe((0,qt.O)(e.getAll()),(0,pe.U)(r=>r.length>0))}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(Ye.z))},t.\u0275cmp=i.Xpm({type:t,selectors:[["scenarii-status"]],outputs:{isRunning:"isRunning"},decls:5,vars:4,consts:[[1,"mb-3","bg-blue-50","border-0","border-gray-800","p-3","rounded-md","shadow-sm","text-gray-800"],[4,"ngIf","ngIfElse"],["noFile",""],["routerLink","/run",1,"cursor-pointer","text-indigo-600","hover:text-indigo-500","focus-within:outline-none","focus-within:ring-2","focus-within:ring-offset-2","focus-within:ring-indigo-500"],["routerLink","/scenarios",1,"cursor-pointer","text-indigo-600","hover:text-indigo-500","focus-within:outline-none","focus-within:ring-2","focus-within:ring-offset-2","focus-within:ring-indigo-500"]],template:function(e,r){if(1&e&&(i.TgZ(0,"div",0),i.YNc(1,qn,8,0,"ng-container",1),i.ALo(2,"async"),i.YNc(3,Hn,1,0,"ng-template",null,2,i.W1O),i.qZA()),2&e){const o=i.MAs(4);i.xp6(1),i.Q6J("ngIf",i.lcZ(2,2,r.isRunning))("ngIfElse",o)}},directives:[Q.O5,he.yS],pipes:[Q.Ov],styles:["[_nghost-%COMP%]{display:contents}"]}),t})();var Qn=E(7579),Kn=E(727),Xn=E(4482),er=E(5032);const nr=i.GuJ,ir=Symbol("__destroy"),Wt=Symbol("__decoratorApplied");function $t(t){return"string"==typeof t?Symbol(`__destroy__${t}`):ir}function Jt(t,n){t[n]||(t[n]=new Qn.x)}function Qt(t,n){t[n]&&(t[n].next(),t[n].complete(),t[n]=null)}function Kt(t){t instanceof Kn.w0&&t.unsubscribe()}function Xt(t,n){return function(){var e;if(t&&t.call(this),Qt(this,$t()),n.arrayName)return function(t){Array.isArray(t)&&t.forEach(Kt)}(this[n.arrayName]);if(n.checkProperties)for(const r in this)(null===(e=n.blackList)||void 0===e?void 0:e.includes(r))||Kt(this[r])}}var en=E(801);const hr=(t,n)=>e=>(n||(n=Object.keys(e.controls)),e&&e.controls&&n.some(o=>!t(e.controls[o]))?null:{atLeastOneOf:!0}),fr=(t,n)=>e=>(n||(n=Object.keys(e.controls)),e&&e.controls&&n.filter(o=>!t(e.controls[o])).length>1?{onlyOneOf:!0}:null),pr=(t=[])=>(t=t.map(n=>n.toLocaleLowerCase()),n=>{const e=n.value;return 0===t.length||!e||t.includes(e.type.toLocaleLowerCase())?null:{requiredFileType:!0}});var tn=E(3028);let nn=(()=>{class t{parseFile(e){return(0,ve.D)(new Promise((r,o)=>(0,tn.parse)(e,{download:!1,header:!0,worker:!0,complete:s=>r(s.data),error:s=>o(s)})))}parseURL(e){return(0,ve.D)(new Promise((r,o)=>(0,tn.parse)(e,{download:!0,header:!0,worker:!0,complete:s=>r(s.data),error:s=>o(s)})))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var gr=E(5074);let We=(()=>{class t{constructor(e){this.dataManager=e,this.historyChanged=new i.vpe}list(){var e;return null!==(e=this.dataManager.get(t.STORAGE_ID))&&void 0!==e?e:[]}add(e){let r=this.list();r=r.filter(o=>o!==e),r.unshift(e),r=r.slice(0,10),this.setHistory(r)}remove(e){const r=this.list().filter(o=>o!==e);this.setHistory(r)}clearAll(){this.dataManager.delete(t.STORAGE_ID),this.historyChanged.emit([])}setHistory(e){this.dataManager.set(t.STORAGE_ID,e),this.historyChanged.emit(e)}}return t.STORAGE_ID="remote-file-history",t.\u0275fac=function(e){return new(e||t)(i.LFG(gr.L))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var mr=E(1135);let _r=(()=>{class t{constructor(){this.fileDrop=new i.vpe,this.dragOver=new mr.X(!1),this.preventBodyDrop=!0,this.active=!1}onDrop(e){e.preventDefault(),this.active=!1,this.dragOver.next(!1);const{dataTransfer:r}=e;if(!r)return;let o=[];r.items?(o=Array.from(r.items).filter(s=>"file"===s.kind).map(s=>s.getAsFile()).filter(s=>!!s),r.items.clear()):(o=Array.from(r.files),r.clearData()),this.fileDrop.emit(Array.from(o))}onDragOver(e){e.stopPropagation(),e.preventDefault(),this.active=!0,this.dragOver.next(!0)}onDragLeave(){this.active=!1,this.dragOver.next(!1)}onBodyDragOver(e){this.preventBodyDrop&&(e.preventDefault(),e.stopPropagation())}onBodyDrop(e){this.preventBodyDrop&&e.preventDefault()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=i.lG2({type:t,selectors:[["","scenariiDragAndDrop",""]],hostVars:2,hostBindings:function(e,r){1&e&&i.NdJ("drop",function(s){return r.onDrop(s)})("dragover",function(s){return r.onDragOver(s)})("dragleave",function(s){return r.onDragLeave(s)})("dragover",function(s){return r.onBodyDragOver(s)},!1,i.pYS)("drop",function(s){return r.onBodyDrop(s)},!1,i.pYS),2&e&&i.ekj("drop-zone-active",r.active)},inputs:{preventBodyDrop:"preventBodyDrop"},outputs:{fileDrop:"fileDrop",dragOver:"dragOver"}}),t})();var rn=E(9444);let yr=(()=>{class t{transform(e,r=""){return e.map(o=>`${r}.${o}`).join(",")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=i.Yjl({name:"extensionList",type:t,pure:!0}),t})();function vr(t,n){if(1&t){const e=i.EpF();i.TgZ(0,"div",8),i.TgZ(1,"label",9),i.TgZ(2,"span"),i._uU(3,"Upload a file"),i.qZA(),i.TgZ(4,"input",10),i.NdJ("change",function(o){return i.CHM(e),i.oxw(2).onFileChange(o)}),i.ALo(5,"extensionList"),i.qZA(),i.qZA(),i.TgZ(6,"p",11),i._uU(7,"or drag and drop"),i.qZA(),i.qZA()}if(2&t){const e=i.oxw(2);i.xp6(4),i.s9C("accept",i.lcZ(5,1,e.extensions))}}function Cr(t,n){1&t&&(i.TgZ(0,"div",12),i._uU(1,"Drop the file here"),i.qZA())}function Ar(t,n){if(1&t){const e=i.EpF();i.TgZ(0,"div",2),i.NdJ("fileDrop",function(o){return i.CHM(e),i.oxw().onFileDropped(o)})("dragOver",function(o){return i.CHM(e),i.oxw().isOver=o}),i.TgZ(1,"div",3),i._UZ(2,"fa-icon",4),i.YNc(3,vr,8,3,"div",5),i.YNc(4,Cr,2,0,"ng-template",null,6,i.W1O),i.TgZ(6,"p",7),i._uU(7),i.ALo(8,"extensionList"),i.qZA(),i.qZA(),i.qZA()}if(2&t){const e=i.MAs(5),r=i.oxw();i.xp6(2),i.Q6J("icon",r.faFileUpload),i.xp6(1),i.Q6J("ngIf",!r.isOver)("ngIfElse",e),i.xp6(4),i.hij(" ",i.xi3(8,4,r.extensions,"*")," up to 10MB ")}}function br(t,n){if(1&t){const e=i.EpF();i.TgZ(0,"div",13),i._uU(1," Currently selected: "),i.TgZ(2,"span",14),i._uU(3),i.qZA(),i.TgZ(4,"span",15),i._uU(5,"("),i.TgZ(6,"button",16),i.NdJ("click",function(){return i.CHM(e),i.oxw().onClear()}),i._uU(7," remove"),i.qZA(),i._uU(8,")"),i.qZA(),i.qZA()}if(2&t){const e=i.oxw();i.xp6(3),i.Oqu(null==e.file?null:e.file.name)}}let Vr=(()=>{class t{constructor(){this.extensions=[],this.faFileUpload=en.Y9i,this.file=null,this.isOver=!1,this.onChange=()=>{},this.onTouched=()=>{}}writeValue(e){e&&(this.file=e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}onFileChange(e){var r;this.file=(null===(r=e.target.files)||void 0===r?void 0:r[0])||null,this.onChange(this.file)}onClear(){this.file=null,this.onChange(null)}onFileDropped(e){const r=e[0];!r||(this.file=r,this.onChange(this.file))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Xpm({type:t,selectors:[["scenarii-file-upload"]],inputs:{extensions:"extensions"},features:[i._Bn([{provide:J,useExisting:(0,i.Gpc)(()=>t),multi:!0}])],decls:3,vars:2,consts:[["class","mt-6 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md","scenariiDragAndDrop","",3,"fileDrop","dragOver",4,"ngIf","ngIfElse"],["fileSelected",""],["scenariiDragAndDrop","",1,"mt-6","flex","justify-center","px-6","pt-5","pb-6","border-2","border-gray-300","border-dashed","rounded-md",3,"fileDrop","dragOver"],[1,"space-y-1","text-center","text-gray-600"],[1,"text-2xl",3,"icon"],["class","flex text-sm",4,"ngIf","ngIfElse"],["dragOver",""],[1,"text-xs","text-gray-500"],[1,"flex","text-sm"],["for","file-upload",1,"relative","cursor-pointer","bg-white","rounded-md","font-medium","text-indigo-600","hover:text-indigo-500","focus-within:outline-none","focus-within:ring-2","focus-within:ring-offset-2","focus-within:ring-indigo-500"],["id","file-upload","name","file-upload","type","file",1,"sr-only",3,"accept","change"],[1,"pl-1"],[1,"text-sm"],[1,"mt-3","text-sm","text-center","px-6","pt-5","pb-6","border-2","border-gray-300","border-dashed","rounded-sm","text-gray-400"],[1,"text-gray-800"],[1,"ml-3","text-sm"],[1,"relative","cursor-pointer","bg-white","rounded-md","font-medium","text-indigo-600","hover:text-indigo-500","focus-within:outline-none","focus-within:ring-2","focus-within:ring-offset-2","focus-within:ring-indigo-500",3,"click"]],template:function(e,r){if(1&e&&(i.YNc(0,Ar,9,7,"div",0),i.YNc(1,br,9,1,"ng-template",null,1,i.W1O)),2&e){const o=i.MAs(2);i.Q6J("ngIf",!r.file)("ngIfElse",o)}},directives:[Q.O5,_r,rn.BN],pipes:[yr],styles:[""]}),t})();function Dr(t,n){if(1&t&&(i.TgZ(0,"div"),i._uU(1),i.qZA()),2&t){const e=i.oxw(2);i.xp6(1),i.hij(" ",e.message," ")}}function wr(t,n){if(1&t&&(i.TgZ(0,"div",1),i.YNc(1,Dr,2,1,"div",2),i.qZA()),2&t){const e=i.oxw();i.xp6(1),i.Q6J("ngIf",null==e.control.errors?null:e.control.errors[e.errorName])}}let Er=(()=>{class t{constructor(){this.control=null,this.message="This field is invalid",this.errorName=null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Xpm({type:t,selectors:[["scenarii-form-error"]],inputs:{control:"control",message:"message",errorName:"errorName"},decls:1,vars:1,consts:[["class","text-red-500",4,"ngIf"],[1,"text-red-500"],[4,"ngIf"]],template:function(e,r){1&e&&i.YNc(0,wr,2,1,"div",0),2&e&&i.Q6J("ngIf",r.errorName&&r.control&&r.control&&r.control.invalid&&(r.control.dirty||r.control.touched))},directives:[Q.O5],styles:[""]}),t})();const Or=function(){return["csv"]};let ye=class{constructor(n,e,r,o,s,c){this.csvParser=e,this.scenarios=r,this.fileHistory=o,this.route=s,this.router=c,this.faTimesCircle=en.nYk,this.form=n.group({url:["",u.pattern("https?://.{2,}")],file:[null,[pr(["text/csv","application/vnd.ms-excel","application/csv"])]]},{validators:[hr(u.required),fr(u.required)]}),this.route.queryParams.pipe(function(t,n){return e=>{const r=$t(n);return"string"==typeof n?function(t,n,e){const r=t[n];Jt(t,e),t[n]=function(){r.apply(this,arguments),Qt(this,e),t[n]=r}}(t,n,r):Jt(t,r),e.pipe(function(t){return(0,Xn.e)((n,e)=>{(0,Ce.Xf)(t).subscribe(new Re.Q(e,()=>e.complete(),er.Z)),!e.closed&&n.subscribe(e)})}(t[r]))}}(this)).subscribe(V=>{!V.url||this.form.patchValue({url:V.url})})}get url(){return this.form.get("url")}get file(){return this.form.get("file")}onSubmit(){this.form.value.file?this.useLocalFile(this.form.value.file):this.useRemoteUrl(this.form.value.url)}onClearUrl(){!this.url||(this.url.reset(),this.router.navigateByUrl("/load"))}useLocalFile(n){this.csvParser.parseFile(n).subscribe({next:e=>this.scenarios.reset(e)})}useRemoteUrl(n){this.csvParser.parseURL(n).subscribe({next:e=>{this.scenarios.reset(e),this.fileHistory.add(n)}})}};ye.\u0275fac=function(n){return new(n||ye)(i.Y36(Zt),i.Y36(nn),i.Y36(Ye.z),i.Y36(We),i.Y36(he.gz),i.Y36(he.F0))},ye.\u0275cmp=i.Xpm({type:ye,selectors:[["scenarii-csv-opener"]],decls:24,vars:15,consts:[[3,"formGroup","ngSubmit"],[1,"shadow","sm:rounded-md","sm:overflow-hidden"],[1,"px-4","py-5","bg-white","sm:p-6","space-y-6"],[1,"text-lg","font-medium","leading-6","text-gray-900"],[1,"text-sm","text-gray-500","mt-1","italic"],["name","file","formControlName","file",3,"extensions"],["errorName","requiredFileType","message","The selected file is not a CSV file.",3,"control"],[1,""],[1,"mt-1","flex","rounded-md","shadow-sm"],["type","text","name","url","placeholder","http://www.example.com","formControlName","url",1,"focus:ring-gray-500","focus:border-gray-500","flex-1","block","w-full","rounded-l-md","sm:text-sm","border-gray-300"],[1,"py-1","px-2.5","rounded-r-md","border-y","border-r","border-gray-300","focus:ring-gray-500","focus:border-gray-500","block","bg-gray-300","hover:bg-gray-200","text-gray-800",3,"click"],[3,"icon"],["errorName","pattern","message","The url is malformed.",3,"control"],[1,"px-4","py-3","bg-gray-50","text-right","sm:px-6"],["type","submit",1,"inline-flex","justify-center","py-2","px-4","border","border-transparent","shadow-sm","text-sm","font-medium","rounded-md","text-white","bg-gray-600","hover:bg-gray-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500","disabled:bg-gray-200",3,"disabled"]],template:function(n,e){1&n&&(i.TgZ(0,"form",0),i.NdJ("ngSubmit",function(){return e.onSubmit()}),i.TgZ(1,"div",1),i.TgZ(2,"div",2),i.TgZ(3,"div"),i.TgZ(4,"h3",3),i._uU(5," Use a local file "),i.qZA(),i.TgZ(6,"p",4),i._uU(7," Select a file on your computer to upload or drop it. "),i.qZA(),i.qZA(),i._UZ(8,"scenarii-file-upload",5),i._UZ(9,"scenarii-form-error",6),i.TgZ(10,"div"),i.TgZ(11,"h3",3),i._uU(12," Or a remote file "),i.qZA(),i.TgZ(13,"p",4),i._uU(14," Fill an URL to download a remote CSV file. "),i.qZA(),i.qZA(),i.TgZ(15,"div",7),i.TgZ(16,"div",8),i._UZ(17,"input",9),i.TgZ(18,"button",10),i.NdJ("click",function(){return e.onClearUrl()}),i._UZ(19,"fa-icon",11),i.qZA(),i.qZA(),i._UZ(20,"scenarii-form-error",12),i.qZA(),i.qZA(),i.TgZ(21,"div",13),i.TgZ(22,"button",14),i._uU(23," Upload "),i.qZA(),i.qZA(),i.qZA(),i.qZA()),2&n&&(i.Q6J("formGroup",e.form),i.xp6(8),i.Q6J("extensions",i.DdM(14,Or)),i.xp6(1),i.Q6J("control",e.file),i.xp6(8),i.ekj("focus:ring-red-500",null==e.url?null:e.url.invalid)("focus:border-red-500",null==e.url?null:e.url.invalid)("focus:border-red-300",null==e.url?null:e.url.invalid)("border-red-500",null==e.url?null:e.url.invalid),i.xp6(2),i.Q6J("icon",e.faTimesCircle),i.xp6(1),i.Q6J("control",e.url),i.xp6(2),i.Q6J("disabled",!e.form.valid))},directives:[ot,ne,qe,Vr,q,ut,Er,me,rn.BN],styles:[""]}),ye=function(t,n,e,r){var c,o=arguments.length,s=o<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,n,e,r);else for(var V=t.length-1;V>=0;V--)(c=t[V])&&(s=(o<3?c(s):o>3?c(n,e,s):c(n,e))||s);return o>3&&s&&Object.defineProperty(n,e,s),s}([function(t={}){return n=>{!function(t){return!!t[nr]}(n)?function(t,n){t.prototype.ngOnDestroy=Xt(t.prototype.ngOnDestroy,n)}(n,t):function(t,n){const e=t.\u0275pipe;e.onDestroy=Xt(e.onDestroy,n)}(n,t),function(t){t.prototype[Wt]=!0}(n)}}(),function(t,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:paramtypes",n)}(0,[Zt,nn,Ye.z,We,he.gz,he.F0])],ye);const Mr=function(t){return{url:t}};function xr(t,n){if(1&t){const e=i.EpF();i.ynx(0),i.TgZ(1,"a",1),i._uU(2),i.qZA(),i.TgZ(3,"span",2),i._uU(4,"("),i.TgZ(5,"button",3),i.NdJ("click",function(){i.CHM(e);const o=i.oxw();return o.onRemove(o.url)}),i._uU(6," remove"),i.qZA(),i._uU(7,")"),i.qZA(),i.BQk()}if(2&t){const e=i.oxw();i.xp6(1),i.Q6J("queryParams",i.VKq(2,Mr,e.url)),i.xp6(1),i.Oqu(e.url)}}let Fr=(()=>{class t{constructor(e){this.fileHistory=e,this.url=null}onRemove(e){this.fileHistory.remove(e)}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(We))},t.\u0275cmp=i.Xpm({type:t,selectors:[["scenarii-file-history-item"]],inputs:{url:"url"},decls:1,vars:1,consts:[[4,"ngIf"],["routerLink","/load",1,"cursor-pointer","text-indigo-600","hover:text-indigo-500","focus-within:outline-none","focus-within:ring-2","focus-within:ring-offset-2","focus-within:ring-indigo-500",3,"queryParams"],[1,"text-sm","italic","ml-2","text-gray-400"],[1,"cursor-pointer","italic","text-indigo-400","hover:text-indigo-500","focus-within:outline-none","focus-within:ring-2","focus-within:ring-offset-2","focus-within:ring-indigo-500",3,"click"]],template:function(e,r){1&e&&i.YNc(0,xr,8,4,"ng-container",0),2&e&&i.Q6J("ngIf",r.url)},directives:[Q.O5,he.yS],styles:[""]}),t})();function Sr(t,n){if(1&t&&(i.TgZ(0,"li"),i._UZ(1,"scenarii-file-history-item",9),i.qZA()),2&t){const e=n.$implicit;i.xp6(1),i.Q6J("url",e)}}function Tr(t,n){if(1&t&&(i.TgZ(0,"ol",7),i.YNc(1,Sr,2,1,"li",8),i.qZA()),2&t){const e=i.oxw().ngIf;i.xp6(1),i.Q6J("ngForOf",e)}}function Nr(t,n){1&t&&(i.TgZ(0,"div",10),i._uU(1," No URL yet in your history "),i.qZA())}function kr(t,n){if(1&t&&(i.ynx(0),i.YNc(1,Tr,2,1,"ol",5),i.YNc(2,Nr,2,0,"ng-template",null,6,i.W1O),i.BQk()),2&t){const e=n.ngIf,r=i.MAs(3);i.xp6(1),i.Q6J("ngIf",e.length>0)("ngIfElse",r)}}let Rr=(()=>{class t{constructor(e){this.fileHistory=e,this.history$=this.fileHistory.historyChanged.pipe((0,qt.O)(e.list()))}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(We))},t.\u0275cmp=i.Xpm({type:t,selectors:[["scenarii-file-history"]],decls:9,vars:3,consts:[[1,"shadow","sm:rounded-md","sm:overflow-hidden"],[1,"px-4","py-5","bg-white","sm:p-6","space-y-6"],[1,"text-lg","font-medium","leading-6","text-gray-900"],[1,"text-sm","text-gray-500","mt-1","italic"],[4,"ngIf"],["class","space-y-1 list-decimal mx-4",4,"ngIf","ngIfElse"],["noUrl",""],[1,"space-y-1","list-decimal","mx-4"],[4,"ngFor","ngForOf"],[3,"url"],[1,"text-gray-500","italic","text-center","text-sm","py-6"]],template:function(e,r){1&e&&(i.TgZ(0,"div",0),i.TgZ(1,"div",1),i.TgZ(2,"div"),i.TgZ(3,"h3",2),i._uU(4," Select a file in your URL history "),i.qZA(),i.TgZ(5,"p",3),i._uU(6," We can only keep track of remote URL for now. "),i.qZA(),i.qZA(),i.YNc(7,kr,4,2,"ng-container",4),i.ALo(8,"async"),i.qZA(),i.qZA()),2&e&&(i.xp6(7),i.Q6J("ngIf",i.lcZ(8,1,r.history$)))},directives:[Q.O5,Q.sg,Fr],pipes:[Q.Ov],styles:[""]}),t})();var Ir=E(7922);let Gr=(()=>{class t{constructor(e,r){this.scenarios=e,this.reports=r}onReset(){this.scenarios.reset([]),this.reports.reset([])}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(Ye.z),i.Y36(Ir.M))},t.\u0275cmp=i.Xpm({type:t,selectors:[["scenarii-reset"]],decls:5,vars:0,consts:[["action","#","method","POST"],[1,"shadow","sm:rounded-md","sm:overflow-hidden"],[1,"px-4","py-3","bg-gray-50","text-right","sm:px-6"],["type","submit",1,"inline-flex","justify-center","py-2","px-4","border","border-transparent","shadow-sm","text-sm","font-medium","rounded-md","text-white","bg-gray-600","hover:bg-gray-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-gray-500",3,"click"]],template:function(e,r){1&e&&(i.TgZ(0,"form",0),i.TgZ(1,"div",1),i.TgZ(2,"div",2),i.TgZ(3,"button",3),i.NdJ("click",function(){return r.onReset()}),i._uU(4," Reset "),i.qZA(),i.qZA(),i.qZA(),i.qZA())},directives:[ot,ne],styles:["[_nghost-%COMP%]{display:contents}"]}),t})();function Pr(t,n){1&t&&(i.ynx(0),i.TgZ(1,"div",5),i._UZ(2,"scenarii-csv-opener"),i._UZ(3,"scenarii-file-history"),i.qZA(),i.BQk())}function Br(t,n){1&t&&i._UZ(0,"scenarii-reset")}const Ur=[{path:"",component:(()=>{class t{constructor(){this.isRunning=!1}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Xpm({type:t,selectors:[["scenarii-loader"]],decls:8,vars:2,consts:[[1,"flex","flex-col","flex-auto"],[1,"p-3","flex-auto"],[3,"isRunning"],[4,"ngIf","ngIfElse"],["reset",""],[1,"md:grid","md:grid-cols-2","md:gap-6"]],template:function(e,r){if(1&e&&(i.TgZ(0,"div",0),i.TgZ(1,"scenarii-title"),i._uU(2,"Load a file"),i.qZA(),i.TgZ(3,"main",1),i.TgZ(4,"scenarii-status",2),i.NdJ("isRunning",function(s){return r.isRunning=s}),i.qZA(),i.YNc(5,Pr,4,0,"ng-container",3),i.YNc(6,Br,1,0,"ng-template",null,4,i.W1O),i.qZA(),i.qZA()),2&e){const o=i.MAs(7);i.xp6(5),i.Q6J("ngIf",!r.isRunning)("ngIfElse",o)}},directives:[Zn.r,Yn,Q.O5,ye,Rr,Gr],styles:["[_nghost-%COMP%]{display:contents}"]}),t})()}];let Lr=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[[he.Bz.forChild(Ur)],he.Bz]}),t})(),jr=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[[Q.ez,jn.m,Lr,jt]]}),t})()},3028:function(gt,ke){var E,i;E=function ve(){"use strict";var N="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==N?N:{},ce=!N.document&&!!N.postMessage,Ce=ce&&/blob:/i.test((N.location||{}).protocol),Ae={},Re=0,y={parse:function(l,a){var u=(a=a||{}).dynamicTyping||!1;if(A(u)&&(a.dynamicTypingFunction=u,u={}),a.dynamicTyping=u,a.transform=!!A(a.transform)&&a.transform,a.worker&&y.WORKERS_SUPPORTED){var h=function(){if(!y.WORKERS_SUPPORTED)return!1;var B,T,v=(B=N.URL||N.webkitURL||null,T=ve.toString(),y.BLOB_URL||(y.BLOB_URL=B.createObjectURL(new Blob(["(",T,")();"],{type:"text/javascript"})))),D=new N.Worker(v);return D.onmessage=$e,D.id=Re++,Ae[D.id]=D}();return h.userStep=a.step,h.userChunk=a.chunk,h.userComplete=a.complete,h.userError=a.error,a.step=A(a.step),a.chunk=A(a.chunk),a.complete=A(a.complete),a.error=A(a.error),delete a.worker,void h.postMessage({input:l,config:a,workerId:h.id})}var f=null;return"string"==typeof l?f=a.download?new pe(a):new K(a):!0===l.readable&&A(l.read)&&A(l.on)?f=new J(a):(N.File&&l instanceof File||l instanceof Object)&&(f=new ge(a)),f.stream(l)},unparse:function(l,a){var u=!1,h=!0,f=",",v="\r\n",D='"',B=D+D,T=!1,p=null,k=!1;!function(){if("object"==typeof a){if("string"!=typeof a.delimiter||y.BAD_DELIMITERS.filter(function(d){return-1!==a.delimiter.indexOf(d)}).length||(f=a.delimiter),("boolean"==typeof a.quotes||"function"==typeof a.quotes||Array.isArray(a.quotes))&&(u=a.quotes),"boolean"!=typeof a.skipEmptyLines&&"string"!=typeof a.skipEmptyLines||(T=a.skipEmptyLines),"string"==typeof a.newline&&(v=a.newline),"string"==typeof a.quoteChar&&(D=a.quoteChar),"boolean"==typeof a.header&&(h=a.header),Array.isArray(a.columns)){if(0===a.columns.length)throw new Error("Option columns is empty");p=a.columns}void 0!==a.escapeChar&&(B=a.escapeChar+D),"boolean"==typeof a.escapeFormulae&&(k=a.escapeFormulae)}}();var m=new RegExp(de(D),"g");if("string"==typeof l&&(l=JSON.parse(l)),Array.isArray(l)){if(!l.length||Array.isArray(l[0]))return X(null,l,T);if("object"==typeof l[0])return X(p||Object.keys(l[0]),l,T)}else if("object"==typeof l)return"string"==typeof l.data&&(l.data=JSON.parse(l.data)),Array.isArray(l.data)&&(l.fields||(l.fields=l.meta&&l.meta.fields),l.fields||(l.fields=Array.isArray(l.data[0])?l.fields:"object"==typeof l.data[0]?Object.keys(l.data[0]):[]),Array.isArray(l.data[0])||"object"==typeof l.data[0]||(l.data=[l.data])),X(l.fields||[],l.data||[],T);throw new Error("Unable to serialize unrecognized input");function X(d,F,R){var Z="";"string"==typeof d&&(d=JSON.parse(d)),"string"==typeof F&&(F=JSON.parse(F));var U=Array.isArray(d)&&0<d.length,I=!Array.isArray(F[0]);if(U&&h){for(var P=0;P<d.length;P++)0<P&&(Z+=f),Z+=j(d[P],P);0<F.length&&(Z+=v)}for(var g=0;g<F.length;g++){var O=U?d.length:F[g].length,x=!1,S=U?0===Object.keys(F[g]).length:0===F[g].length;if(R&&!U&&(x="greedy"===R?""===F[g].join("").trim():1===F[g].length&&0===F[g][0].length),"greedy"===R&&U){for(var w=[],b=0;b<O;b++)w.push(F[g][I?d[b]:b]);x=""===w.join("").trim()}if(!x){for(var _=0;_<O;_++)0<_&&!S&&(Z+=f),Z+=j(F[g][U&&I?d[_]:_],_);g<F.length-1&&(!R||0<O&&!S)&&(Z+=v)}}return Z}function j(d,F){if(null==d)return"";if(d.constructor===Date)return JSON.stringify(d).slice(1,25);!0===k&&"string"==typeof d&&null!==d.match(/^[=+\-@].*$/)&&(d="'"+d);var R=d.toString().replace(m,B);return"boolean"==typeof u&&u||"function"==typeof u&&u(d,F)||Array.isArray(u)&&u[F]||function(U,I){for(var P=0;P<I.length;P++)if(-1<U.indexOf(I[P]))return!0;return!1}(R,y.BAD_DELIMITERS)||-1<R.indexOf(f)||" "===R.charAt(0)||" "===R.charAt(R.length-1)?D+R+D:R}}};if(y.RECORD_SEP=String.fromCharCode(30),y.UNIT_SEP=String.fromCharCode(31),y.BYTE_ORDER_MARK="\ufeff",y.BAD_DELIMITERS=["\r","\n",'"',y.BYTE_ORDER_MARK],y.WORKERS_SUPPORTED=!ce&&!!N.Worker,y.NODE_STREAM_INPUT=1,y.LocalChunkSize=10485760,y.RemoteChunkSize=5242880,y.DefaultDelimiter=",",y.Parser=Oe,y.ParserHandle=Ie,y.NetworkStreamer=pe,y.FileStreamer=ge,y.StringStreamer=K,y.ReadableStreamStreamer=J,N.jQuery){var fe=N.jQuery;fe.fn.parse=function(l){var a=l.config||{},u=[];return this.each(function(v){if("INPUT"!==fe(this).prop("tagName").toUpperCase()||"file"!==fe(this).attr("type").toLowerCase()||!N.FileReader||!this.files||0===this.files.length)return!0;for(var D=0;D<this.files.length;D++)u.push({file:this.files[D],inputElem:this,instanceConfig:fe.extend({},a)})}),h(),this;function h(){if(0!==u.length){var D,B,T,p=u[0];if(A(l.before)){var k=l.before(p.file,p.inputElem);if("object"==typeof k){if("abort"===k.action)return"AbortError",D=p.file,B=p.inputElem,T=k.reason,void(A(l.error)&&l.error({name:"AbortError"},D,B,T));if("skip"===k.action)return void f();"object"==typeof k.config&&(p.instanceConfig=fe.extend(p.instanceConfig,k.config))}else if("skip"===k)return void f()}var m=p.instanceConfig.complete;p.instanceConfig.complete=function(X){A(m)&&m(X,p.file,p.inputElem),f()},y.parse(p.file,p.instanceConfig)}else A(l.complete)&&l.complete()}function f(){u.splice(0,1),h()}}}function re(l){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(a){var u=te(a);u.chunkSize=parseInt(u.chunkSize),a.step||a.chunk||(u.chunkSize=null),this._handle=new Ie(u),(this._handle.streamer=this)._config=u}.call(this,l),this.parseChunk=function(a,u){if(this.isFirstChunk&&A(this._config.beforeFirstChunk)){var h=this._config.beforeFirstChunk(a);void 0!==h&&(a=h)}this.isFirstChunk=!1,this._halted=!1;var f=this._partialLine+a;this._partialLine="";var v=this._handle.parse(f,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var D=v.meta.cursor;this._finished||(this._partialLine=f.substring(D-this._baseIndex),this._baseIndex=D),v&&v.data&&(this._rowCount+=v.data.length);var B=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(Ce)N.postMessage({results:v,workerId:y.WORKER_ID,finished:B});else if(A(this._config.chunk)&&!u){if(this._config.chunk(v,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);v=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(v.data),this._completeResults.errors=this._completeResults.errors.concat(v.errors),this._completeResults.meta=v.meta),this._completed||!B||!A(this._config.complete)||v&&v.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),B||v&&v.meta.paused||this._nextChunk(),v}this._halted=!0},this._sendError=function(a){A(this._config.error)?this._config.error(a):Ce&&this._config.error&&N.postMessage({workerId:y.WORKER_ID,error:a,finished:!1})}}function pe(l){var a;(l=l||{}).chunkSize||(l.chunkSize=y.RemoteChunkSize),re.call(this,l),this._nextChunk=ce?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(u){this._input=u,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(a=new XMLHttpRequest,this._config.withCredentials&&(a.withCredentials=this._config.withCredentials),ce||(a.onload=ie(this._chunkLoaded,this),a.onerror=ie(this._chunkError,this)),a.open(this._config.downloadRequestBody?"POST":"GET",this._input,!ce),this._config.downloadRequestHeaders){var u=this._config.downloadRequestHeaders;for(var h in u)a.setRequestHeader(h,u[h])}this._config.chunkSize&&a.setRequestHeader("Range","bytes="+this._start+"-"+(this._start+this._config.chunkSize-1));try{a.send(this._config.downloadRequestBody)}catch(v){this._chunkError(v.message)}ce&&0===a.status&&this._chunkError()}},this._chunkLoaded=function(){var h;4===a.readyState&&(a.status<200||400<=a.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:a.responseText.length,this._finished=!this._config.chunkSize||this._start>=(null===(h=a.getResponseHeader("Content-Range"))?-1:parseInt(h.substring(h.lastIndexOf("/")+1))),this.parseChunk(a.responseText)))},this._chunkError=function(u){this._sendError(new Error(a.statusText||u))}}function ge(l){var a,u;(l=l||{}).chunkSize||(l.chunkSize=y.LocalChunkSize),re.call(this,l);var h="undefined"!=typeof FileReader;this.stream=function(f){this._input=f,u=f.slice||f.webkitSlice||f.mozSlice,h?((a=new FileReader).onload=ie(this._chunkLoaded,this),a.onerror=ie(this._chunkError,this)):a=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var f=this._input;if(this._config.chunkSize){var v=Math.min(this._start+this._config.chunkSize,this._input.size);f=u.call(f,this._start,v)}var D=a.readAsText(f,this._config.encoding);h||this._chunkLoaded({target:{result:D}})},this._chunkLoaded=function(f){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(f.target.result)},this._chunkError=function(){this._sendError(a.error)}}function K(l){var a;re.call(this,l=l||{}),this.stream=function(u){return a=u,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var u,h=this._config.chunkSize;return h?(u=a.substring(0,h),a=a.substring(h)):(u=a,a=""),this._finished=!a,this.parseChunk(u)}}}function J(l){re.call(this,l=l||{});var a=[],u=!0,h=!1;this.pause=function(){re.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){re.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(f){this._input=f,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){h&&1===a.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),a.length?this.parseChunk(a.shift()):u=!0},this._streamData=ie(function(f){try{a.push("string"==typeof f?f:f.toString(this._config.encoding)),u&&(u=!1,this._checkIsFinished(),this.parseChunk(a.shift()))}catch(v){this._streamError(v)}},this),this._streamError=ie(function(f){this._streamCleanUp(),this._sendError(f)},this),this._streamEnd=ie(function(){this._streamCleanUp(),h=!0,this._streamData("")},this),this._streamCleanUp=ie(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function Ie(l){var a,u,h,f=Math.pow(2,53),v=-f,D=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,B=/^(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))$/,T=this,p=0,k=0,m=!1,X=!1,j=[],d={data:[],errors:[],meta:{}};if(A(l.step)){var F=l.step;l.step=function(g){if(d=g,U())Z();else{if(Z(),0===d.data.length)return;p+=g.data.length,l.preview&&p>l.preview?u.abort():(d.data=d.data[0],F(d,T))}}}function R(g){return"greedy"===l.skipEmptyLines?""===g.join("").trim():1===g.length&&0===g[0].length}function Z(){if(d&&h&&(P("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+y.DefaultDelimiter+"'"),h=!1),l.skipEmptyLines)for(var g=0;g<d.data.length;g++)R(d.data[g])&&d.data.splice(g--,1);return U()&&function(){if(d)if(Array.isArray(d.data[0])){for(var x=0;U()&&x<d.data.length;x++)d.data[x].forEach(O);d.data.splice(0,1)}else d.data.forEach(O);function O(S,w){A(l.transformHeader)&&(S=l.transformHeader(S,w)),j.push(S)}}(),function(){if(!d||!l.header&&!l.dynamicTyping&&!l.transform)return d;function O(S,w){var b,G=l.header?{}:[];for(b=0;b<S.length;b++){var _=b,Y=S[b];l.header&&(_=b>=j.length?"__parsed_extra":j[b]),l.transform&&(Y=l.transform(Y,_)),Y=I(_,Y),"__parsed_extra"===_?(G[_]=G[_]||[],G[_].push(Y)):G[_]=Y}return l.header&&(b>j.length?P("FieldMismatch","TooManyFields","Too many fields: expected "+j.length+" fields but parsed "+b,k+w):b<j.length&&P("FieldMismatch","TooFewFields","Too few fields: expected "+j.length+" fields but parsed "+b,k+w)),G}var x=1;return!d.data.length||Array.isArray(d.data[0])?(d.data=d.data.map(O),x=d.data.length):d.data=O(d.data,0),l.header&&d.meta&&(d.meta.fields=j),k+=x,d}()}function U(){return l.header&&0===j.length}function I(g,O){return x=g,l.dynamicTypingFunction&&void 0===l.dynamicTyping[x]&&(l.dynamicTyping[x]=l.dynamicTypingFunction(x)),!0===(l.dynamicTyping[x]||l.dynamicTyping)?"true"===O||"TRUE"===O||"false"!==O&&"FALSE"!==O&&(function(S){if(D.test(S)){var w=parseFloat(S);if(v<w&&w<f)return!0}return!1}(O)?parseFloat(O):B.test(O)?new Date(O):""===O?null:O):O;var x}function P(g,O,x,S){var w={type:g,code:O,message:x};void 0!==S&&(w.row=S),d.errors.push(w)}this.parse=function(g,O,x){if(l.newline||(l.newline=function(G,_){G=G.substring(0,1048576);var Y=new RegExp(de(_)+"([^]*?)"+de(_),"gm"),L=(G=G.replace(Y,"")).split("\r"),M=G.split("\n");if(1===L.length||1<M.length&&M[0].length<L[0].length)return"\n";for(var se=0,ee=0;ee<L.length;ee++)"\n"===L[ee][0]&&se++;return se>=L.length/2?"\r\n":"\r"}(g,l.quoteChar||'"')),h=!1,l.delimiter)A(l.delimiter)&&(l.delimiter=l.delimiter(g),d.meta.delimiter=l.delimiter);else{var w=function(G,_,Y,L,M){var oe,se,ee,q;M=M||[",","\t","|",";",y.RECORD_SEP,y.UNIT_SEP];for(var ne=0;ne<M.length;ne++){var H=M[ne],ae=0,le=0,be=0;ee=void 0;for(var _e=new Oe({comments:L,delimiter:H,newline:_,preview:10}).parse(G),Me=0;Me<_e.data.length;Me++)if(Y&&R(_e.data[Me]))be++;else{var Ve=_e.data[Me].length;le+=Ve,void 0!==ee?0<Ve&&(ae+=Math.abs(Ve-ee),ee=Ve):ee=Ve}0<_e.data.length&&(le/=_e.data.length-be),(void 0===se||ae<=se)&&(void 0===q||q<le)&&1.99<le&&(se=ae,oe=H,q=le)}return{successful:!!(l.delimiter=oe),bestDelimiter:oe}}(g,l.newline,l.skipEmptyLines,l.comments,l.delimitersToGuess);w.successful?l.delimiter=w.bestDelimiter:(h=!0,l.delimiter=y.DefaultDelimiter),d.meta.delimiter=l.delimiter}var b=te(l);return l.preview&&l.header&&b.preview++,a=g,u=new Oe(b),d=u.parse(a,O,x),Z(),m?{meta:{paused:!0}}:d||{meta:{paused:!1}}},this.paused=function(){return m},this.pause=function(){m=!0,u.abort(),a=A(l.chunk)?"":a.substring(u.getCharIndex())},this.resume=function(){T.streamer._halted?(m=!1,T.streamer.parseChunk(a,!0)):setTimeout(T.resume,3)},this.aborted=function(){return X},this.abort=function(){X=!0,u.abort(),d.meta.aborted=!0,A(l.complete)&&l.complete(d),a=""}}function de(l){return l.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Oe(l){var a,u=(l=l||{}).delimiter,h=l.newline,f=l.comments,v=l.step,D=l.preview,B=l.fastMode,T=a=void 0===l.quoteChar?'"':l.quoteChar;if(void 0!==l.escapeChar&&(T=l.escapeChar),("string"!=typeof u||-1<y.BAD_DELIMITERS.indexOf(u))&&(u=","),f===u)throw new Error("Comment character same as delimiter");!0===f?f="#":("string"!=typeof f||-1<y.BAD_DELIMITERS.indexOf(f))&&(f=!1),"\n"!==h&&"\r"!==h&&"\r\n"!==h&&(h="\n");var p=0,k=!1;this.parse=function(m,X,j){if("string"!=typeof m)throw new Error("Input must be a string");var d=m.length,F=u.length,R=h.length,Z=f.length,U=A(v),I=[],P=[],g=[],O=p=0;if(!m)return q();if(B||!1!==B&&-1===m.indexOf(a)){for(var x=m.split(h),S=0;S<x.length;S++){if(p+=(g=x[S]).length,S!==x.length-1)p+=h.length;else if(j)return q();if(!f||g.substring(0,Z)!==f){if(U){if(I=[],M(g.split(u)),ne(),k)return q()}else M(g.split(u));if(D&&D<=S)return I=I.slice(0,D),q(!0)}}return q()}for(var w=m.indexOf(u,p),b=m.indexOf(h,p),G=new RegExp(de(T)+de(a),"g"),_=m.indexOf(a,p);;)if(m[p]!==a)if(f&&0===g.length&&m.substring(p,p+Z)===f){if(-1===b)return q();b=m.indexOf(h,p=b+R),w=m.indexOf(u,p)}else if(-1!==w&&(w<b||-1===b))g.push(m.substring(p,w)),w=m.indexOf(u,p=w+F);else{if(-1===b)break;if(g.push(m.substring(p,b)),ee(b+R),U&&(ne(),k))return q();if(D&&I.length>=D)return q(!0)}else for(_=p,p++;;){if(-1===(_=m.indexOf(a,_+1)))return j||P.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:I.length,index:p}),se();if(_===d-1)return se(m.substring(p,_).replace(G,a));if(a!==T||m[_+1]!==T){if(a===T||0===_||m[_-1]!==T){-1!==w&&w<_+1&&(w=m.indexOf(u,_+1)),-1!==b&&b<_+1&&(b=m.indexOf(h,_+1));var Y=oe(-1===b?w:Math.min(w,b));if(m[_+1+Y]===u){g.push(m.substring(p,_).replace(G,a)),m[p=_+1+Y+F]!==a&&(_=m.indexOf(a,p)),w=m.indexOf(u,p),b=m.indexOf(h,p);break}var L=oe(b);if(m.substring(_+1+L,_+1+L+R)===h){if(g.push(m.substring(p,_).replace(G,a)),ee(_+1+L+R),w=m.indexOf(u,p),_=m.indexOf(a,p),U&&(ne(),k))return q();if(D&&I.length>=D)return q(!0);break}P.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:I.length,index:p}),_++}}else _++}return se();function M(H){I.push(H),O=p}function oe(H){var ae=0;if(-1!==H){var le=m.substring(_+1,H);le&&""===le.trim()&&(ae=le.length)}return ae}function se(H){return j||(void 0===H&&(H=m.substring(p)),g.push(H),p=d,M(g),U&&ne()),q()}function ee(H){p=H,M(g),g=[],b=m.indexOf(h,p)}function q(H){return{data:I,errors:P,meta:{delimiter:u,linebreak:h,aborted:k,truncated:!!H,cursor:O+(X||0)}}}function ne(){v(q()),I=[],P=[]}},this.abort=function(){k=!0},this.getCharIndex=function(){return p}}function $e(l){var a=l.data,u=Ae[a.workerId],h=!1;if(a.error)u.userError(a.error,a.file);else if(a.results&&a.results.data){var f={abort:function(){h=!0,Ge(a.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:me,resume:me};if(A(u.userStep)){for(var v=0;v<a.results.data.length&&(u.userStep({data:a.results.data[v],errors:a.results.errors,meta:a.results.meta},f),!h);v++);delete a.results}else A(u.userChunk)&&(u.userChunk(a.results,f,a.file),delete a.results)}a.finished&&!h&&Ge(a.workerId,a.results)}function Ge(l,a){var u=Ae[l];A(u.userComplete)&&u.userComplete(a),u.terminate(),delete Ae[l]}function me(){throw new Error("Not implemented.")}function te(l){if("object"!=typeof l||null===l)return l;var a=Array.isArray(l)?[]:{};for(var u in l)a[u]=te(l[u]);return a}function ie(l,a){return function(){l.apply(a,arguments)}}function A(l){return"function"==typeof l}return Ce&&(N.onmessage=function(l){var a=l.data;if(void 0===y.WORKER_ID&&a&&(y.WORKER_ID=a.workerId),"string"==typeof a.input)N.postMessage({workerId:y.WORKER_ID,results:y.parse(a.input,a.config),finished:!0});else if(N.File&&a.input instanceof File||a.input instanceof Object){var u=y.parse(a.input,a.config);u&&N.postMessage({workerId:y.WORKER_ID,results:u,finished:!0})}}),(pe.prototype=Object.create(re.prototype)).constructor=pe,(ge.prototype=Object.create(re.prototype)).constructor=ge,(K.prototype=Object.create(K.prototype)).constructor=K,(J.prototype=Object.create(re.prototype)).constructor=J,y},void 0!==(i=E.apply(ke,[]))&&(gt.exports=i)}}]);