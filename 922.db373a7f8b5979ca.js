(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[922],{6922:(at,Oe,D)=>{"use strict";D.r(Oe),D.d(Oe,{LoaderModule:()=>er});var J=D(9808),r=D(1223),fe=D(2076),S=D(8306),oe=D(4742),Ce=D(8421),pe=D(7669),Pe=D(5403),_=D(3268),ae=D(1810),le=D(4004);let ue=(()=>{class n{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return n.\u0275fac=function(e){return new(e||n)(r.Y36(r.Qsj),r.Y36(r.SBq))},n.\u0275dir=r.lG2({type:n}),n})(),z=(()=>{class n extends ue{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=r.n5z(n)))(i||n)}}(),n.\u0275dir=r.lG2({type:n,features:[r.qOj]}),n})();const H=new r.OlP("NgValueAccessor"),Ve={provide:H,useExisting:(0,r.Gpc)(()=>de),multi:!0},Fe=new r.OlP("CompositionEventMode");let de=(()=>{class n extends ue{constructor(e,i,o){super(e,i),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const n=(0,J.q)()?(0,J.q)().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return n.\u0275fac=function(e){return new(e||n)(r.Y36(r.Qsj),r.Y36(r.SBq),r.Y36(Fe,8))},n.\u0275dir=r.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,i){1&e&&r.NdJ("input",function(l){return i._handleInput(l.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(l){return i._compositionEnd(l.target.value)})},features:[r._Bn([Ve]),r.qOj]}),n})();function Q(n){return null==n||0===n.length}function ee(n){return null!=n&&"number"==typeof n.length}const v=new r.OlP("NgValidators"),a=new r.OlP("NgAsyncValidators"),s=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class u{static min(t){return n=t,t=>{if(Q(t.value)||Q(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null};var n}static max(t){return n=t,t=>{if(Q(t.value)||Q(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null};var n}static required(t){return Q(t.value)?{required:!0}:null}static requiredTrue(t){return!0===t.value?null:{required:!0}}static email(t){return Q((n=t).value)||s.test(n.value)?null:{email:!0};var n}static minLength(t){return n=t,t=>Q(t.value)||!ee(t.value)?null:t.value.length<n?{minlength:{requiredLength:n,actualLength:t.value.length}}:null;var n}static maxLength(t){return n=t,t=>ee(t.value)&&t.value.length>n?{maxlength:{requiredLength:n,actualLength:t.value.length}}:null;var n}static pattern(t){return function(n){if(!n)return g;let t,e;return"string"==typeof n?(e="","^"!==n.charAt(0)&&(e+="^"),e+=n,"$"!==n.charAt(n.length-1)&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),i=>{if(Q(i.value))return null;const o=i.value;return t.test(o)?null:{pattern:{requiredPattern:e,actualValue:o}}}}(t)}static nullValidator(t){return null}static compose(t){return B(t)}static composeAsync(t){return G(t)}}function g(n){return null}function W(n){return null!=n}function P(n){const t=(0,r.QGY)(n)?(0,fe.D)(n):n;return(0,r.CqO)(t),t}function d(n){let t={};return n.forEach(e=>{t=null!=e?Object.assign(Object.assign({},t),e):t}),0===Object.keys(t).length?null:t}function w(n,t){return t.map(e=>e(n))}function L(n){return n.map(t=>function(n){return!n.validate}(t)?t:e=>t.validate(e))}function B(n){if(!n)return null;const t=n.filter(W);return 0==t.length?null:function(e){return d(w(e,t))}}function N(n){return null!=n?B(L(n)):null}function G(n){if(!n)return null;const t=n.filter(W);return 0==t.length?null:function(e){return function(...n){const t=(0,pe.jO)(n),{args:e,keys:i}=(0,oe.D)(n),o=new S.y(l=>{const{length:F}=e;if(!F)return void l.complete();const Y=new Array(F);let he=F,ve=F;for(let Ue=0;Ue<F;Ue++){let st=!1;(0,Ce.Xf)(e[Ue]).subscribe(new Pe.Q(l,tr=>{st||(st=!0,ve--),Y[Ue]=tr},()=>he--,void 0,()=>{(!he||!st)&&(ve||l.next(i?(0,ae.n)(i,Y):Y),l.complete())}))}});return t?o.pipe((0,_.Z)(t)):o}(w(e,t).map(P)).pipe((0,le.U)(d))}}function p(n){return null!=n?G(L(n)):null}function b(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function M(n){return n._rawValidators}function O(n){return n._rawAsyncValidators}function A(n){return n?Array.isArray(n)?n:[n]:[]}function C(n,t){return Array.isArray(n)?n.includes(t):n===t}function R(n,t){const e=A(t);return A(n).forEach(o=>{C(e,o)||e.push(o)}),e}function m(n,t){return A(t).filter(e=>!C(n,e))}class Z{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=N(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=p(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class U extends Z{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class E extends Z{get formDirective(){return null}get path(){return null}}class te{constructor(t){this._cd=t}is(t){var e,i,o;return"submitted"===t?!!(null===(e=this._cd)||void 0===e?void 0:e.submitted):!!(null===(o=null===(i=this._cd)||void 0===i?void 0:i.control)||void 0===o?void 0:o[t])}}let q=(()=>{class n extends te{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(r.Y36(U,2))},n.\u0275dir=r.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,i){2&e&&r.ekj("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))},features:[r.qOj]}),n})(),K=(()=>{class n extends te{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(r.Y36(E,10))},n.\u0275dir=r.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,i){2&e&&r.ekj("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))("ng-submitted",i.is("submitted"))},features:[r.qOj]}),n})();function be(n,t){qe(n,t),t.valueAccessor.writeValue(n.value),function(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&lt(n,t)})}(n,t),function(n,t){const e=(i,o)=>{t.valueAccessor.writeValue(i),o&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&lt(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function(n,t){if(t.valueAccessor.setDisabledState){const e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function ke(n,t,e=!0){const i=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(i),t.valueAccessor.registerOnTouched(i)),Ne(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Te(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function qe(n,t){const e=M(n);null!==t.validator?n.setValidators(b(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const i=O(n);null!==t.asyncValidator?n.setAsyncValidators(b(i,t.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const o=()=>n.updateValueAndValidity();Te(t._rawValidators,o),Te(t._rawAsyncValidators,o)}function Ne(n,t){let e=!1;if(null!==n){if(null!==t.validator){const o=M(n);if(Array.isArray(o)&&o.length>0){const l=o.filter(F=>F!==t.validator);l.length!==o.length&&(e=!0,n.setValidators(l))}}if(null!==t.asyncValidator){const o=O(n);if(Array.isArray(o)&&o.length>0){const l=o.filter(F=>F!==t.asyncValidator);l.length!==o.length&&(e=!0,n.setAsyncValidators(l))}}}const i=()=>{};return Te(t._rawValidators,i),Te(t._rawAsyncValidators,i),e}function lt(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Re(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}const De="VALID",Ge="INVALID",_e="PENDING",Ee="DISABLED";function He(n){return(ze(n)?n.validators:n)||null}function ct(n){return Array.isArray(n)?N(n):n||null}function Ye(n,t){return(ze(t)?t.asyncValidators:n)||null}function ht(n){return Array.isArray(n)?p(n):n||null}function ze(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class We{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=ct(this._rawValidators),this._composedAsyncValidatorFn=ht(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===De}get invalid(){return this.status===Ge}get pending(){return this.status==_e}get disabled(){return this.status===Ee}get enabled(){return this.status!==Ee}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=ct(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=ht(t)}addValidators(t){this.setValidators(R(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(R(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(m(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(m(t,this._rawAsyncValidators))}hasValidator(t){return C(this._rawValidators,t)}hasAsyncValidator(t){return C(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=_e,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Ee,this.errors=null,this._forEachChild(i=>{i.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=De,this._forEachChild(i=>{i.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===De||this.status===_e)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ee:De}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=_e,this._hasOwnPendingAsyncValidator=!0;const e=P(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(n,t,e){if(null==t||(Array.isArray(t)||(t=t.split(".")),Array.isArray(t)&&0===t.length))return null;let i=n;return t.forEach(o=>{i=i instanceof Me?i.controls.hasOwnProperty(o)?i.controls[o]:null:i instanceof $e&&i.at(o)||null}),i}(this,t)}getError(t,e){const i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.vpe,this.statusChanges=new r.vpe}_calculateStatus(){return this._allControlsDisabled()?Ee:this.errors?Ge:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(_e)?_e:this._anyControlsHaveStatus(Ge)?Ge:De}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){ze(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class ye extends We{constructor(t=null,e,i){super(He(e),Ye(i,e)),this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Re(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Re(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class Me extends We{constructor(t,e,i){super(He(e),Ye(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(i=>{this._throwIfControlMissing(i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(i=>{this.controls[i]&&this.controls[i].patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,o)=>{i.reset(t[o],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=e instanceof ye?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>!!i._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const i=this.controls[e];if(this.contains(e)&&t(i))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,i)=>((e.enabled||this.disabled)&&(t[i]=e.value),t))}_reduceChildren(t,e){let i=t;return this._forEachChild((o,l)=>{i=e(i,o,l)}),i}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,i)=>{if(void 0===t[i])throw new Error(`Must supply a value for form control with name: '${i}'.`)})}}class $e extends We{constructor(t,e,i){super(He(e),Ye(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[t]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,i={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((i,o)=>{this._throwIfControlMissing(o),this.at(o).setValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((i,o)=>{this.at(o)&&this.at(o).patchValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((i,o)=>{i.reset(t[o],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof ye?t.value:t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((e,i)=>!!i._syncPendingControls()||e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,i)=>{t(e,i)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,i)=>{if(void 0===t[i])throw new Error(`Must supply a value for form control at index: ${i}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}let Qe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=r.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),yt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=r.oAB({type:n}),n.\u0275inj=r.cJS({}),n})();const Ke=new r.OlP("NgModelWithFormControlWarning"),en={provide:E,useExisting:(0,r.Gpc)(()=>Ie)};let Ie=(()=>{class n extends E{constructor(e,i){super(),this.validators=e,this.asyncValidators=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new r.vpe,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Ne(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const i=this.form.get(e.path);return be(i,e),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){ke(e.control||null,e,!1),Re(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this.submitted=!0,function(n,t){n._syncPendingControls(),t.forEach(e=>{const i=e.control;"submit"===i.updateOn&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const i=e.control,o=this.form.get(e.path);i!==o&&(ke(i||null,e),o instanceof ye&&(be(o,e),e.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const i=this.form.get(e.path);(function(n,t){qe(n,t)})(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const i=this.form.get(e.path);i&&function(n,t){return Ne(n,t)}(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){qe(this.form,this),this._oldForm&&Ne(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(e){return new(e||n)(r.Y36(v,10),r.Y36(a,10))},n.\u0275dir=r.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(e,i){1&e&&r.NdJ("submit",function(l){return i.onSubmit(l)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r._Bn([en]),r.qOj,r.TTD]}),n})();const rn={provide:U,useExisting:(0,r.Gpc)(()=>tt)};let tt=(()=>{class n extends U{constructor(e,i,o,l,F){super(),this._ngModelWarningConfig=F,this._added=!1,this.update=new r.vpe,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=function(n,t){if(!t)return null;let e,i,o;return Array.isArray(t),t.forEach(l=>{l.constructor===de?e=l:function(n){return Object.getPrototypeOf(n.constructor)===z}(l)?i=l:o=l}),o||i||e||null}(0,l)}set isDisabled(e){}ngOnChanges(e){this._added||this._setUpControl(),function(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return function(n,t){return[...t.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(e){return new(e||n)(r.Y36(E,13),r.Y36(v,10),r.Y36(a,10),r.Y36(H,10),r.Y36(Ke,8))},n.\u0275dir=r.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[r._Bn([rn]),r.qOj,r.TTD]}),n})(),vn=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=r.oAB({type:n}),n.\u0275inj=r.cJS({imports:[[yt]]}),n})(),Nt=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:Ke,useValue:e.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=r.oAB({type:n}),n.\u0275inj=r.cJS({imports:[vn]}),n})(),Vn=(()=>{class n{group(e,i=null){const o=this._reduceControls(e);let Y,l=null,F=null;return null!=i&&(function(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(i)?(l=null!=i.validators?i.validators:null,F=null!=i.asyncValidators?i.asyncValidators:null,Y=null!=i.updateOn?i.updateOn:void 0):(l=null!=i.validator?i.validator:null,F=null!=i.asyncValidator?i.asyncValidator:null)),new Me(o,{asyncValidators:F,updateOn:Y,validators:l})}control(e,i,o){return new ye(e,i,o)}array(e,i,o){const l=e.map(F=>this._createControl(F));return new $e(l,i,o)}_reduceControls(e){const i={};return Object.keys(e).forEach(o=>{i[o]=this._createControl(e[o])}),i}_createControl(e){return e instanceof ye||e instanceof Me||e instanceof $e?e:Array.isArray(e)?this.control(e[0],e.length>1?e[1]:null,e.length>2?e[2]:null):this.control(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=r.Yz7({token:n,factory:n.\u0275fac,providedIn:Nt}),n})();var An=D(1431),Rt=D(8433),bn=D(7688),Dn=D(8675),ot=D(5628);function En(n,t){1&n&&(r.ynx(0),r._uU(1," A file is currently loaded and used. You can reste the progression by clicking on the button below. "),r.BQk())}function Mn(n,t){1&n&&r._uU(0," To start a test, you need to load a file. ")}let wn=(()=>{class n{constructor(e){this.isRunning=e.registryUpdated.pipe((0,Dn.O)(e.getAll()),(0,le.U)(i=>i.length>0))}}return n.\u0275fac=function(e){return new(e||n)(r.Y36(ot.v))},n.\u0275cmp=r.Xpm({type:n,selectors:[["scenarii-status"]],outputs:{isRunning:"isRunning"},decls:5,vars:4,consts:[[1,"mb-3","bg-blue-50","border-0","border-gray-800","p-3","rounded-md","shadow-sm","text-gray-800"],[4,"ngIf","ngIfElse"],["noFile",""]],template:function(e,i){if(1&e&&(r.TgZ(0,"div",0),r.YNc(1,En,2,0,"ng-container",1),r.ALo(2,"async"),r.YNc(3,Mn,1,0,"ng-template",null,2,r.W1O),r.qZA()),2&e){const o=r.MAs(4);r.xp6(1),r.Q6J("ngIf",r.lcZ(2,2,i.isRunning))("ngIfElse",o)}},directives:[J.O5],pipes:[J.Ov],styles:["[_nghost-%COMP%]{display:contents}"]}),n})();const On=(n,t)=>e=>(t||(t=Object.keys(e.controls)),e&&e.controls&&t.some(o=>!n(e.controls[o]))?null:{atLeastOneOf:!0}),xn=(n,t)=>e=>(t||(t=Object.keys(e.controls)),e&&e.controls&&t.filter(o=>!n(e.controls[o])).length>1?{onlyOneOf:!0}:null),Fn=(n=[])=>(n=n.map(t=>t.toLocaleLowerCase()),t=>{const e=t.value;return 0===n.length||!e||n.includes(e.type.toLocaleLowerCase())?null:{requiredFileType:!0}});var Gt=D(3028);let Sn=(()=>{class n{parseFile(e){return(0,fe.D)(new Promise((i,o)=>(0,Gt.parse)(e,{download:!1,header:!0,worker:!0,complete:l=>i(l.data),error:l=>o(l)})))}parseURL(e){return(0,fe.D)(new Promise((i,o)=>(0,Gt.parse)(e,{download:!0,header:!0,worker:!0,complete:l=>i(l.data),error:l=>o(l)})))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=r.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var kn=D(801),Tn=D(1135);let Nn=(()=>{class n{constructor(){this.fileDrop=new r.vpe,this.dragOver=new Tn.X(!1),this.preventBodyDrop=!0,this.active=!1}onDrop(e){e.preventDefault(),this.active=!1,this.dragOver.next(!1);const{dataTransfer:i}=e;if(!i)return;let o=[];i.items?(o=Array.from(i.items).filter(l=>"file"===l.kind).map(l=>l.getAsFile()).filter(l=>!!l),i.items.clear()):(o=Array.from(i.files),i.clearData()),this.fileDrop.emit(Array.from(o))}onDragOver(e){e.stopPropagation(),e.preventDefault(),this.active=!0,this.dragOver.next(!0)}onDragLeave(){this.active=!1,this.dragOver.next(!1)}onBodyDragOver(e){this.preventBodyDrop&&(e.preventDefault(),e.stopPropagation())}onBodyDrop(e){this.preventBodyDrop&&e.preventDefault()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=r.lG2({type:n,selectors:[["","scenariiDragAndDrop",""]],hostVars:2,hostBindings:function(e,i){1&e&&r.NdJ("drop",function(l){return i.onDrop(l)})("dragover",function(l){return i.onDragOver(l)})("dragleave",function(l){return i.onDragLeave(l)})("dragover",function(l){return i.onBodyDragOver(l)},!1,r.pYS)("drop",function(l){return i.onBodyDrop(l)},!1,r.pYS),2&e&&r.ekj("drop-zone-active",i.active)},inputs:{preventBodyDrop:"preventBodyDrop"},outputs:{fileDrop:"fileDrop",dragOver:"dragOver"}}),n})();var Rn=D(9444);let Gn=(()=>{class n{transform(e,i=""){return e.map(o=>`${i}.${o}`).join(",")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=r.Yjl({name:"extensionList",type:n,pure:!0}),n})();function In(n,t){if(1&n){const e=r.EpF();r.TgZ(0,"div",8),r.TgZ(1,"label",9),r.TgZ(2,"span"),r._uU(3,"Upload a file"),r.qZA(),r.TgZ(4,"input",10),r.NdJ("change",function(o){return r.CHM(e),r.oxw(2).onFileChange(o)}),r.ALo(5,"extensionList"),r.qZA(),r.qZA(),r.TgZ(6,"p",11),r._uU(7,"or drag and drop"),r.qZA(),r.qZA()}if(2&n){const e=r.oxw(2);r.xp6(4),r.s9C("accept",r.lcZ(5,1,e.extensions))}}function Bn(n,t){1&n&&(r.TgZ(0,"div",12),r._uU(1,"Drop the file here"),r.qZA())}function Un(n,t){if(1&n){const e=r.EpF();r.TgZ(0,"div",2),r.NdJ("fileDrop",function(o){return r.CHM(e),r.oxw().onFileDropped(o)})("dragOver",function(o){return r.CHM(e),r.oxw().isOver=o}),r.TgZ(1,"div",3),r._UZ(2,"fa-icon",4),r.YNc(3,In,8,3,"div",5),r.YNc(4,Bn,2,0,"ng-template",null,6,r.W1O),r.TgZ(6,"p",7),r._uU(7),r.ALo(8,"extensionList"),r.qZA(),r.qZA(),r.qZA()}if(2&n){const e=r.MAs(5),i=r.oxw();r.xp6(2),r.Q6J("icon",i.faFileUpload),r.xp6(1),r.Q6J("ngIf",!i.isOver)("ngIfElse",e),r.xp6(4),r.hij(" ",r.xi3(8,4,i.extensions,"*")," up to 10MB ")}}function Pn(n,t){if(1&n){const e=r.EpF();r.TgZ(0,"div",13),r._uU(1," Currently selected: "),r.TgZ(2,"span",14),r._uU(3),r.qZA(),r.TgZ(4,"span",15),r._uU(5,"("),r.TgZ(6,"button",16),r.NdJ("click",function(){return r.CHM(e),r.oxw().onClear()}),r._uU(7," remove"),r.qZA(),r._uU(8,")"),r.qZA(),r.qZA()}if(2&n){const e=r.oxw();r.xp6(3),r.Oqu(null==e.file?null:e.file.name)}}let Ln=(()=>{class n{constructor(){this.extensions=[],this.faFileUpload=kn.Y9i,this.file=null,this.isOver=!1,this.onChange=()=>{},this.onTouched=()=>{}}writeValue(e){e&&(this.file=e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}onFileChange(e){var i;this.file=(null===(i=e.target.files)||void 0===i?void 0:i[0])||null,this.onChange(this.file)}onClear(){this.file=null,this.onChange(null)}onFileDropped(e){const i=e[0];!i||(this.file=i,this.onChange(this.file))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=r.Xpm({type:n,selectors:[["scenarii-file-upload"]],inputs:{extensions:"extensions"},features:[r._Bn([{provide:H,useExisting:(0,r.Gpc)(()=>n),multi:!0}])],decls:3,vars:2,consts:[["class","mt-6 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md","scenariiDragAndDrop","",3,"fileDrop","dragOver",4,"ngIf","ngIfElse"],["fileSelected",""],["scenariiDragAndDrop","",1,"mt-6","flex","justify-center","px-6","pt-5","pb-6","border-2","border-gray-300","border-dashed","rounded-md",3,"fileDrop","dragOver"],[1,"space-y-1","text-center","text-gray-600"],[1,"text-2xl",3,"icon"],["class","flex text-sm",4,"ngIf","ngIfElse"],["dragOver",""],[1,"text-xs","text-gray-500"],[1,"flex","text-sm"],["for","file-upload",1,"relative","cursor-pointer","bg-white","rounded-md","font-medium","text-indigo-600","hover:text-indigo-500","focus-within:outline-none","focus-within:ring-2","focus-within:ring-offset-2","focus-within:ring-indigo-500"],["id","file-upload","name","file-upload","type","file",1,"sr-only",3,"accept","change"],[1,"pl-1"],[1,"text-sm"],[1,"mt-3","text-sm","text-center","px-6","pt-5","pb-6","border-2","border-gray-300","border-dashed","rounded-sm","text-gray-400"],[1,"text-gray-800"],[1,"ml-3","text-sm"],[1,"relative","cursor-pointer","bg-white","rounded-md","font-medium","text-indigo-600","hover:text-indigo-500","focus-within:outline-none","focus-within:ring-2","focus-within:ring-offset-2","focus-within:ring-indigo-500",3,"click"]],template:function(e,i){if(1&e&&(r.YNc(0,Un,9,7,"div",0),r.YNc(1,Pn,9,1,"ng-template",null,1,r.W1O)),2&e){const o=r.MAs(2);r.Q6J("ngIf",!i.file)("ngIfElse",o)}},directives:[J.O5,Nn,Rn.BN],pipes:[Gn],styles:[""]}),n})();const qn=function(){return["csv"]};let jn=(()=>{class n{constructor(e,i,o){this.csvParser=i,this.registry=o,this.form=e.group({url:["",u.pattern("(https?://)?([\\da-z.-]+)\\.([a-z.]{2,6})[/\\w .-]*/?")],file:[null,[Fn(["text/csv","application/vnd.ms-excel","application/csv"])]]},{validators:[On(u.required),xn(u.required)]})}onSubmit(){this.form.value.file?this.useLocalFile(this.form.value.file):this.useRemoteUrl(this.form.value.url)}useLocalFile(e){this.csvParser.parseFile(e).subscribe({next:i=>this.registry.reset(i)})}useRemoteUrl(e){this.csvParser.parseURL(e).subscribe({next:i=>this.registry.reset(i)})}}return n.\u0275fac=function(e){return new(e||n)(r.Y36(Vn),r.Y36(Sn),r.Y36(ot.v))},n.\u0275cmp=r.Xpm({type:n,selectors:[["scenarii-csv-opener"]],decls:20,vars:4,consts:[[3,"formGroup","ngSubmit"],[1,"shadow","sm:rounded-md","sm:overflow-hidden"],[1,"px-4","py-5","bg-white","sm:p-6","space-y-6"],[1,"text-lg","font-medium","leading-6","text-gray-900"],[1,"text-sm","text-gray-500","mt-1","italic"],["name","file","formControlName","file",3,"extensions"],[1,""],[1,"mt-1","flex","rounded-md","shadow-sm"],["type","text","name","company-website","id","company-website","placeholder","http://www.example.com","formControlName","url",1,"focus:ring-gray-500","focus:border-gray-500","flex-1","block","w-full","rounded-md","sm:text-sm","border-gray-300"],[1,"px-4","py-3","bg-gray-50","text-right","sm:px-6"],["type","submit",1,"inline-flex","justify-center","py-2","px-4","border","border-transparent","shadow-sm","text-sm","font-medium","rounded-md","text-white","bg-gray-600","hover:bg-gray-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500","disabled:bg-gray-200",3,"disabled"]],template:function(e,i){1&e&&(r.TgZ(0,"form",0),r.NdJ("ngSubmit",function(){return i.onSubmit()}),r.TgZ(1,"div",1),r.TgZ(2,"div",2),r.TgZ(3,"div"),r.TgZ(4,"h3",3),r._uU(5," Use a local file "),r.qZA(),r.TgZ(6,"p",4),r._uU(7," Select a file on your computer to upload or drop it. "),r.qZA(),r.qZA(),r._UZ(8,"scenarii-file-upload",5),r.TgZ(9,"div"),r.TgZ(10,"h3",3),r._uU(11," Or a remote file "),r.qZA(),r.TgZ(12,"p",4),r._uU(13," Fill an URL to download a remote CSV file. "),r.qZA(),r.qZA(),r.TgZ(14,"div",6),r.TgZ(15,"div",7),r._UZ(16,"input",8),r.qZA(),r.qZA(),r.qZA(),r.TgZ(17,"div",9),r.TgZ(18,"button",10),r._uU(19," Upload "),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&e&&(r.Q6J("formGroup",i.form),r.xp6(8),r.Q6J("extensions",r.DdM(3,qn)),r.xp6(10),r.Q6J("disabled",!i.form.valid))},directives:[Qe,K,Ie,Ln,q,tt,de],styles:[""]}),n})();function Zn(n,t){if(1&n&&(r.TgZ(0,"li",8),r._uU(1),r.qZA()),2&n){const e=t.$implicit;r.xp6(1),r.Oqu(e)}}function Hn(n,t){if(1&n&&(r.TgZ(0,"ul",6),r.YNc(1,Zn,2,1,"li",7),r.qZA()),2&n){const e=r.oxw();r.xp6(1),r.Q6J("ngForOf",e.urls)}}function Yn(n,t){1&n&&(r.TgZ(0,"div",9),r._uU(1," No URL yet in your history "),r.qZA())}let zn=(()=>{class n{constructor(){this.urls=[]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=r.Xpm({type:n,selectors:[["scenarii-file-history"]],decls:10,vars:2,consts:[[1,"shadow","sm:rounded-md","sm:overflow-hidden"],[1,"px-4","py-5","bg-white","sm:p-6","space-y-6"],[1,"text-lg","font-medium","leading-6","text-gray-900"],[1,"text-sm","text-gray-500","mt-1","italic"],["class","space-y-1",4,"ngIf","ngIfElse"],["noUrl",""],[1,"space-y-1"],["class","list-none",4,"ngFor","ngForOf"],[1,"list-none"],[1,"text-gray-500","italic","text-center","text-sm","py-6"]],template:function(e,i){if(1&e&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"div"),r.TgZ(3,"h3",2),r._uU(4," Select a file in your URL history "),r.qZA(),r.TgZ(5,"p",3),r._uU(6," We can only keep track of remote URL for now. "),r.qZA(),r.qZA(),r.YNc(7,Hn,2,1,"ul",4),r.YNc(8,Yn,2,0,"ng-template",null,5,r.W1O),r.qZA(),r.qZA()),2&e){const o=r.MAs(9);r.xp6(7),r.Q6J("ngIf",i.urls.length>0)("ngIfElse",o)}},directives:[J.O5,J.sg],styles:[""]}),n})();var Wn=D(7922);let $n=(()=>{class n{constructor(e,i){this.scenariiRegistry=e,this.reportsScenarii=i}onReset(){this.scenariiRegistry.reset([]),this.reportsScenarii.reset([])}}return n.\u0275fac=function(e){return new(e||n)(r.Y36(ot.v),r.Y36(Wn.M))},n.\u0275cmp=r.Xpm({type:n,selectors:[["scenarii-reset"]],decls:5,vars:0,consts:[["action","#","method","POST"],[1,"shadow","sm:rounded-md","sm:overflow-hidden"],[1,"px-4","py-3","bg-gray-50","text-right","sm:px-6"],["type","submit",1,"inline-flex","justify-center","py-2","px-4","border","border-transparent","shadow-sm","text-sm","font-medium","rounded-md","text-white","bg-gray-600","hover:bg-gray-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-gray-500",3,"click"]],template:function(e,i){1&e&&(r.TgZ(0,"form",0),r.TgZ(1,"div",1),r.TgZ(2,"div",2),r.TgZ(3,"button",3),r.NdJ("click",function(){return i.onReset()}),r._uU(4," Reset "),r.qZA(),r.qZA(),r.qZA(),r.qZA())},directives:[Qe,K],styles:["[_nghost-%COMP%]{display:contents}"]}),n})();function Jn(n,t){1&n&&(r.ynx(0),r.TgZ(1,"div",6),r._UZ(2,"scenarii-csv-opener"),r._UZ(3,"scenarii-file-history"),r.qZA(),r.BQk())}function Qn(n,t){1&n&&r._UZ(0,"scenarii-reset")}const Kn=[{path:"",component:(()=>{class n{constructor(){this.isRunning=!1}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=r.Xpm({type:n,selectors:[["scenarii-loader"]],decls:7,vars:2,consts:[[1,"flex","flex-col","flex-auto"],["title","Load a file"],[1,"p-3","flex-auto"],[3,"isRunning"],[4,"ngIf","ngIfElse"],["reset",""],[1,"md:grid","md:grid-cols-2","md:gap-6"]],template:function(e,i){if(1&e&&(r.TgZ(0,"div",0),r._UZ(1,"scenarii-title",1),r.TgZ(2,"main",2),r.TgZ(3,"scenarii-status",3),r.NdJ("isRunning",function(l){return i.isRunning=l}),r.qZA(),r.YNc(4,Jn,4,0,"ng-container",4),r.YNc(5,Qn,1,0,"ng-template",null,5,r.W1O),r.qZA(),r.qZA()),2&e){const o=r.MAs(6);r.xp6(4),r.Q6J("ngIf",!i.isRunning)("ngIfElse",o)}},directives:[bn.r,wn,J.O5,jn,zn,$n],styles:["[_nghost-%COMP%]{display:contents}"]}),n})()}];let Xn=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=r.oAB({type:n}),n.\u0275inj=r.cJS({imports:[[Rt.Bz.forChild(Kn)],Rt.Bz]}),n})(),er=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=r.oAB({type:n}),n.\u0275inj=r.cJS({imports:[[J.ez,An.m,Xn,Nt]]}),n})()},3028:function(at,Oe){var D,r;D=function fe(){"use strict";var S="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==S?S:{},oe=!S.document&&!!S.postMessage,Ce=oe&&/blob:/i.test((S.location||{}).protocol),pe={},Pe=0,_={parse:function(a,s){var u=(s=s||{}).dynamicTyping||!1;if(v(u)&&(s.dynamicTypingFunction=u,u={}),s.dynamicTyping=u,s.transform=!!v(s.transform)&&s.transform,s.worker&&_.WORKERS_SUPPORTED){var c=function(){if(!_.WORKERS_SUPPORTED)return!1;var I,x,y=(I=S.URL||S.webkitURL||null,x=fe.toString(),_.BLOB_URL||(_.BLOB_URL=I.createObjectURL(new Blob(["(",x,")();"],{type:"text/javascript"})))),V=new S.Worker(y);return V.onmessage=Le,V.id=Pe++,pe[V.id]=V}();return c.userStep=s.step,c.userChunk=s.chunk,c.userComplete=s.complete,c.userError=s.error,s.step=v(s.step),s.chunk=v(s.chunk),s.complete=v(s.complete),s.error=v(s.error),delete s.worker,void c.postMessage({input:a,config:s,workerId:c.id})}var h=null;return"string"==typeof a?h=s.download?new le(s):new z(s):!0===a.readable&&v(a.read)&&v(a.on)?h=new H(s):(S.File&&a instanceof File||a instanceof Object)&&(h=new ue(s)),h.stream(a)},unparse:function(a,s){var u=!1,c=!0,h=",",y="\r\n",V='"',I=V+V,x=!1,f=null,k=!1;!function(){if("object"==typeof s){if("string"!=typeof s.delimiter||_.BAD_DELIMITERS.filter(function(d){return-1!==s.delimiter.indexOf(d)}).length||(h=s.delimiter),("boolean"==typeof s.quotes||"function"==typeof s.quotes||Array.isArray(s.quotes))&&(u=s.quotes),"boolean"!=typeof s.skipEmptyLines&&"string"!=typeof s.skipEmptyLines||(x=s.skipEmptyLines),"string"==typeof s.newline&&(y=s.newline),"string"==typeof s.quoteChar&&(V=s.quoteChar),"boolean"==typeof s.header&&(c=s.header),Array.isArray(s.columns)){if(0===s.columns.length)throw new Error("Option columns is empty");f=s.columns}void 0!==s.escapeChar&&(I=s.escapeChar+V),"boolean"==typeof s.escapeFormulae&&(k=s.escapeFormulae)}}();var g=new RegExp(se(V),"g");if("string"==typeof a&&(a=JSON.parse(a)),Array.isArray(a)){if(!a.length||Array.isArray(a[0]))return W(null,a,x);if("object"==typeof a[0])return W(f||Object.keys(a[0]),a,x)}else if("object"==typeof a)return"string"==typeof a.data&&(a.data=JSON.parse(a.data)),Array.isArray(a.data)&&(a.fields||(a.fields=a.meta&&a.meta.fields),a.fields||(a.fields=Array.isArray(a.data[0])?a.fields:"object"==typeof a.data[0]?Object.keys(a.data[0]):[]),Array.isArray(a.data[0])||"object"==typeof a.data[0]||(a.data=[a.data])),W(a.fields||[],a.data||[],x);throw new Error("Unable to serialize unrecognized input");function W(d,w,T){var L="";"string"==typeof d&&(d=JSON.parse(d)),"string"==typeof w&&(w=JSON.parse(w));var B=Array.isArray(d)&&0<d.length,N=!Array.isArray(w[0]);if(B&&c){for(var G=0;G<d.length;G++)0<G&&(L+=h),L+=P(d[G],G);0<w.length&&(L+=y)}for(var p=0;p<w.length;p++){var b=B?d.length:w[p].length,M=!1,O=B?0===Object.keys(w[p]).length:0===w[p].length;if(T&&!B&&(M="greedy"===T?""===w[p].join("").trim():1===w[p].length&&0===w[p][0].length),"greedy"===T&&B){for(var A=[],C=0;C<b;C++)A.push(w[p][N?d[C]:C]);M=""===A.join("").trim()}if(!M){for(var m=0;m<b;m++)0<m&&!O&&(L+=h),L+=P(w[p][B&&N?d[m]:m],m);p<w.length-1&&(!T||0<b&&!O)&&(L+=y)}}return L}function P(d,w){if(null==d)return"";if(d.constructor===Date)return JSON.stringify(d).slice(1,25);!0===k&&"string"==typeof d&&null!==d.match(/^[=+\-@].*$/)&&(d="'"+d);var T=d.toString().replace(g,I);return"boolean"==typeof u&&u||"function"==typeof u&&u(d,w)||Array.isArray(u)&&u[w]||function(B,N){for(var G=0;G<N.length;G++)if(-1<B.indexOf(N[G]))return!0;return!1}(T,_.BAD_DELIMITERS)||-1<T.indexOf(h)||" "===T.charAt(0)||" "===T.charAt(T.length-1)?V+T+V:T}}};if(_.RECORD_SEP=String.fromCharCode(30),_.UNIT_SEP=String.fromCharCode(31),_.BYTE_ORDER_MARK="\ufeff",_.BAD_DELIMITERS=["\r","\n",'"',_.BYTE_ORDER_MARK],_.WORKERS_SUPPORTED=!oe&&!!S.Worker,_.NODE_STREAM_INPUT=1,_.LocalChunkSize=10485760,_.RemoteChunkSize=5242880,_.DefaultDelimiter=",",_.Parser=Ve,_.ParserHandle=xe,_.NetworkStreamer=le,_.FileStreamer=ue,_.StringStreamer=z,_.ReadableStreamStreamer=H,S.jQuery){var ae=S.jQuery;ae.fn.parse=function(a){var s=a.config||{},u=[];return this.each(function(y){if("INPUT"!==ae(this).prop("tagName").toUpperCase()||"file"!==ae(this).attr("type").toLowerCase()||!S.FileReader||!this.files||0===this.files.length)return!0;for(var V=0;V<this.files.length;V++)u.push({file:this.files[V],inputElem:this,instanceConfig:ae.extend({},s)})}),c(),this;function c(){if(0!==u.length){var V,I,x,f=u[0];if(v(a.before)){var k=a.before(f.file,f.inputElem);if("object"==typeof k){if("abort"===k.action)return"AbortError",V=f.file,I=f.inputElem,x=k.reason,void(v(a.error)&&a.error({name:"AbortError"},V,I,x));if("skip"===k.action)return void h();"object"==typeof k.config&&(f.instanceConfig=ae.extend(f.instanceConfig,k.config))}else if("skip"===k)return void h()}var g=f.instanceConfig.complete;f.instanceConfig.complete=function(W){v(g)&&g(W,f.file,f.inputElem),h()},_.parse(f.file,f.instanceConfig)}else v(a.complete)&&a.complete()}function h(){u.splice(0,1),c()}}}function X(a){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(s){var u=Q(s);u.chunkSize=parseInt(u.chunkSize),s.step||s.chunk||(u.chunkSize=null),this._handle=new xe(u),(this._handle.streamer=this)._config=u}.call(this,a),this.parseChunk=function(s,u){if(this.isFirstChunk&&v(this._config.beforeFirstChunk)){var c=this._config.beforeFirstChunk(s);void 0!==c&&(s=c)}this.isFirstChunk=!1,this._halted=!1;var h=this._partialLine+s;this._partialLine="";var y=this._handle.parse(h,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var V=y.meta.cursor;this._finished||(this._partialLine=h.substring(V-this._baseIndex),this._baseIndex=V),y&&y.data&&(this._rowCount+=y.data.length);var I=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(Ce)S.postMessage({results:y,workerId:_.WORKER_ID,finished:I});else if(v(this._config.chunk)&&!u){if(this._config.chunk(y,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);y=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(y.data),this._completeResults.errors=this._completeResults.errors.concat(y.errors),this._completeResults.meta=y.meta),this._completed||!I||!v(this._config.complete)||y&&y.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),I||y&&y.meta.paused||this._nextChunk(),y}this._halted=!0},this._sendError=function(s){v(this._config.error)?this._config.error(s):Ce&&this._config.error&&S.postMessage({workerId:_.WORKER_ID,error:s,finished:!1})}}function le(a){var s;(a=a||{}).chunkSize||(a.chunkSize=_.RemoteChunkSize),X.call(this,a),this._nextChunk=oe?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(u){this._input=u,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(s=new XMLHttpRequest,this._config.withCredentials&&(s.withCredentials=this._config.withCredentials),oe||(s.onload=ee(this._chunkLoaded,this),s.onerror=ee(this._chunkError,this)),s.open(this._config.downloadRequestBody?"POST":"GET",this._input,!oe),this._config.downloadRequestHeaders){var u=this._config.downloadRequestHeaders;for(var c in u)s.setRequestHeader(c,u[c])}this._config.chunkSize&&s.setRequestHeader("Range","bytes="+this._start+"-"+(this._start+this._config.chunkSize-1));try{s.send(this._config.downloadRequestBody)}catch(y){this._chunkError(y.message)}oe&&0===s.status&&this._chunkError()}},this._chunkLoaded=function(){var c;4===s.readyState&&(s.status<200||400<=s.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:s.responseText.length,this._finished=!this._config.chunkSize||this._start>=(null===(c=s.getResponseHeader("Content-Range"))?-1:parseInt(c.substring(c.lastIndexOf("/")+1))),this.parseChunk(s.responseText)))},this._chunkError=function(u){this._sendError(new Error(s.statusText||u))}}function ue(a){var s,u;(a=a||{}).chunkSize||(a.chunkSize=_.LocalChunkSize),X.call(this,a);var c="undefined"!=typeof FileReader;this.stream=function(h){this._input=h,u=h.slice||h.webkitSlice||h.mozSlice,c?((s=new FileReader).onload=ee(this._chunkLoaded,this),s.onerror=ee(this._chunkError,this)):s=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var h=this._input;if(this._config.chunkSize){var y=Math.min(this._start+this._config.chunkSize,this._input.size);h=u.call(h,this._start,y)}var V=s.readAsText(h,this._config.encoding);c||this._chunkLoaded({target:{result:V}})},this._chunkLoaded=function(h){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(h.target.result)},this._chunkError=function(){this._sendError(s.error)}}function z(a){var s;X.call(this,a=a||{}),this.stream=function(u){return s=u,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var u,c=this._config.chunkSize;return c?(u=s.substring(0,c),s=s.substring(c)):(u=s,s=""),this._finished=!s,this.parseChunk(u)}}}function H(a){X.call(this,a=a||{});var s=[],u=!0,c=!1;this.pause=function(){X.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){X.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(h){this._input=h,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){c&&1===s.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),s.length?this.parseChunk(s.shift()):u=!0},this._streamData=ee(function(h){try{s.push("string"==typeof h?h:h.toString(this._config.encoding)),u&&(u=!1,this._checkIsFinished(),this.parseChunk(s.shift()))}catch(y){this._streamError(y)}},this),this._streamError=ee(function(h){this._streamCleanUp(),this._sendError(h)},this),this._streamEnd=ee(function(){this._streamCleanUp(),c=!0,this._streamData("")},this),this._streamCleanUp=ee(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function xe(a){var s,u,c,h=Math.pow(2,53),y=-h,V=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,I=/^(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))$/,x=this,f=0,k=0,g=!1,W=!1,P=[],d={data:[],errors:[],meta:{}};if(v(a.step)){var w=a.step;a.step=function(p){if(d=p,B())L();else{if(L(),0===d.data.length)return;f+=p.data.length,a.preview&&f>a.preview?u.abort():(d.data=d.data[0],w(d,x))}}}function T(p){return"greedy"===a.skipEmptyLines?""===p.join("").trim():1===p.length&&0===p[0].length}function L(){if(d&&c&&(G("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+_.DefaultDelimiter+"'"),c=!1),a.skipEmptyLines)for(var p=0;p<d.data.length;p++)T(d.data[p])&&d.data.splice(p--,1);return B()&&function(){if(d)if(Array.isArray(d.data[0])){for(var M=0;B()&&M<d.data.length;M++)d.data[M].forEach(b);d.data.splice(0,1)}else d.data.forEach(b);function b(O,A){v(a.transformHeader)&&(O=a.transformHeader(O,A)),P.push(O)}}(),function(){if(!d||!a.header&&!a.dynamicTyping&&!a.transform)return d;function b(O,A){var C,R=a.header?{}:[];for(C=0;C<O.length;C++){var m=C,Z=O[C];a.header&&(m=C>=P.length?"__parsed_extra":P[C]),a.transform&&(Z=a.transform(Z,m)),Z=N(m,Z),"__parsed_extra"===m?(R[m]=R[m]||[],R[m].push(Z)):R[m]=Z}return a.header&&(C>P.length?G("FieldMismatch","TooManyFields","Too many fields: expected "+P.length+" fields but parsed "+C,k+A):C<P.length&&G("FieldMismatch","TooFewFields","Too few fields: expected "+P.length+" fields but parsed "+C,k+A)),R}var M=1;return!d.data.length||Array.isArray(d.data[0])?(d.data=d.data.map(b),M=d.data.length):d.data=b(d.data,0),a.header&&d.meta&&(d.meta.fields=P),k+=M,d}()}function B(){return a.header&&0===P.length}function N(p,b){return M=p,a.dynamicTypingFunction&&void 0===a.dynamicTyping[M]&&(a.dynamicTyping[M]=a.dynamicTypingFunction(M)),!0===(a.dynamicTyping[M]||a.dynamicTyping)?"true"===b||"TRUE"===b||"false"!==b&&"FALSE"!==b&&(function(O){if(V.test(O)){var A=parseFloat(O);if(y<A&&A<h)return!0}return!1}(b)?parseFloat(b):I.test(b)?new Date(b):""===b?null:b):b;var M}function G(p,b,M,O){var A={type:p,code:b,message:M};void 0!==O&&(A.row=O),d.errors.push(A)}this.parse=function(p,b,M){if(a.newline||(a.newline=function(R,m){R=R.substring(0,1048576);var Z=new RegExp(se(m)+"([^]*?)"+se(m),"gm"),U=(R=R.replace(Z,"")).split("\r"),E=R.split("\n");if(1===U.length||1<E.length&&E[0].length<U[0].length)return"\n";for(var ne=0,$=0;$<U.length;$++)"\n"===U[$][0]&&ne++;return ne>=U.length/2?"\r\n":"\r"}(p,a.quoteChar||'"')),c=!1,a.delimiter)v(a.delimiter)&&(a.delimiter=a.delimiter(p),d.meta.delimiter=a.delimiter);else{var A=function(R,m,Z,U,E){var te,ne,$,q;E=E||[",","\t","|",";",_.RECORD_SEP,_.UNIT_SEP];for(var K=0;K<E.length;K++){var j=E[K],re=0,ie=0,ge=0;$=void 0;for(var ce=new Ve({comments:U,delimiter:j,newline:m,preview:10}).parse(R),Ae=0;Ae<ce.data.length;Ae++)if(Z&&T(ce.data[Ae]))ge++;else{var me=ce.data[Ae].length;ie+=me,void 0!==$?0<me&&(re+=Math.abs(me-$),$=me):$=me}0<ce.data.length&&(ie/=ce.data.length-ge),(void 0===ne||re<=ne)&&(void 0===q||q<ie)&&1.99<ie&&(ne=re,te=j,q=ie)}return{successful:!!(a.delimiter=te),bestDelimiter:te}}(p,a.newline,a.skipEmptyLines,a.comments,a.delimitersToGuess);A.successful?a.delimiter=A.bestDelimiter:(c=!0,a.delimiter=_.DefaultDelimiter),d.meta.delimiter=a.delimiter}var C=Q(a);return a.preview&&a.header&&C.preview++,s=p,u=new Ve(C),d=u.parse(s,b,M),L(),g?{meta:{paused:!0}}:d||{meta:{paused:!1}}},this.paused=function(){return g},this.pause=function(){g=!0,u.abort(),s=v(a.chunk)?"":s.substring(u.getCharIndex())},this.resume=function(){x.streamer._halted?(g=!1,x.streamer.parseChunk(s,!0)):setTimeout(x.resume,3)},this.aborted=function(){return W},this.abort=function(){W=!0,u.abort(),d.meta.aborted=!0,v(a.complete)&&a.complete(d),s=""}}function se(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Ve(a){var s,u=(a=a||{}).delimiter,c=a.newline,h=a.comments,y=a.step,V=a.preview,I=a.fastMode,x=s=void 0===a.quoteChar?'"':a.quoteChar;if(void 0!==a.escapeChar&&(x=a.escapeChar),("string"!=typeof u||-1<_.BAD_DELIMITERS.indexOf(u))&&(u=","),h===u)throw new Error("Comment character same as delimiter");!0===h?h="#":("string"!=typeof h||-1<_.BAD_DELIMITERS.indexOf(h))&&(h=!1),"\n"!==c&&"\r"!==c&&"\r\n"!==c&&(c="\n");var f=0,k=!1;this.parse=function(g,W,P){if("string"!=typeof g)throw new Error("Input must be a string");var d=g.length,w=u.length,T=c.length,L=h.length,B=v(y),N=[],G=[],p=[],b=f=0;if(!g)return q();if(I||!1!==I&&-1===g.indexOf(s)){for(var M=g.split(c),O=0;O<M.length;O++){if(f+=(p=M[O]).length,O!==M.length-1)f+=c.length;else if(P)return q();if(!h||p.substring(0,L)!==h){if(B){if(N=[],E(p.split(u)),K(),k)return q()}else E(p.split(u));if(V&&V<=O)return N=N.slice(0,V),q(!0)}}return q()}for(var A=g.indexOf(u,f),C=g.indexOf(c,f),R=new RegExp(se(x)+se(s),"g"),m=g.indexOf(s,f);;)if(g[f]!==s)if(h&&0===p.length&&g.substring(f,f+L)===h){if(-1===C)return q();C=g.indexOf(c,f=C+T),A=g.indexOf(u,f)}else if(-1!==A&&(A<C||-1===C))p.push(g.substring(f,A)),A=g.indexOf(u,f=A+w);else{if(-1===C)break;if(p.push(g.substring(f,C)),$(C+T),B&&(K(),k))return q();if(V&&N.length>=V)return q(!0)}else for(m=f,f++;;){if(-1===(m=g.indexOf(s,m+1)))return P||G.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:N.length,index:f}),ne();if(m===d-1)return ne(g.substring(f,m).replace(R,s));if(s!==x||g[m+1]!==x){if(s===x||0===m||g[m-1]!==x){-1!==A&&A<m+1&&(A=g.indexOf(u,m+1)),-1!==C&&C<m+1&&(C=g.indexOf(c,m+1));var Z=te(-1===C?A:Math.min(A,C));if(g[m+1+Z]===u){p.push(g.substring(f,m).replace(R,s)),g[f=m+1+Z+w]!==s&&(m=g.indexOf(s,f)),A=g.indexOf(u,f),C=g.indexOf(c,f);break}var U=te(C);if(g.substring(m+1+U,m+1+U+T)===c){if(p.push(g.substring(f,m).replace(R,s)),$(m+1+U+T),A=g.indexOf(u,f),m=g.indexOf(s,f),B&&(K(),k))return q();if(V&&N.length>=V)return q(!0);break}G.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:N.length,index:f}),m++}}else m++}return ne();function E(j){N.push(j),b=f}function te(j){var re=0;if(-1!==j){var ie=g.substring(m+1,j);ie&&""===ie.trim()&&(re=ie.length)}return re}function ne(j){return P||(void 0===j&&(j=g.substring(f)),p.push(j),f=d,E(p),B&&K()),q()}function $(j){f=j,E(p),p=[],C=g.indexOf(c,f)}function q(j){return{data:N,errors:G,meta:{delimiter:u,linebreak:c,aborted:k,truncated:!!j,cursor:b+(W||0)}}}function K(){y(q()),N=[],G=[]}},this.abort=function(){k=!0},this.getCharIndex=function(){return f}}function Le(a){var s=a.data,u=pe[s.workerId],c=!1;if(s.error)u.userError(s.error,s.file);else if(s.results&&s.results.data){var h={abort:function(){c=!0,Fe(s.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:de,resume:de};if(v(u.userStep)){for(var y=0;y<s.results.data.length&&(u.userStep({data:s.results.data[y],errors:s.results.errors,meta:s.results.meta},h),!c);y++);delete s.results}else v(u.userChunk)&&(u.userChunk(s.results,h,s.file),delete s.results)}s.finished&&!c&&Fe(s.workerId,s.results)}function Fe(a,s){var u=pe[a];v(u.userComplete)&&u.userComplete(s),u.terminate(),delete pe[a]}function de(){throw new Error("Not implemented.")}function Q(a){if("object"!=typeof a||null===a)return a;var s=Array.isArray(a)?[]:{};for(var u in a)s[u]=Q(a[u]);return s}function ee(a,s){return function(){a.apply(s,arguments)}}function v(a){return"function"==typeof a}return Ce&&(S.onmessage=function(a){var s=a.data;if(void 0===_.WORKER_ID&&s&&(_.WORKER_ID=s.workerId),"string"==typeof s.input)S.postMessage({workerId:_.WORKER_ID,results:_.parse(s.input,s.config),finished:!0});else if(S.File&&s.input instanceof File||s.input instanceof Object){var u=_.parse(s.input,s.config);u&&S.postMessage({workerId:_.WORKER_ID,results:u,finished:!0})}}),(le.prototype=Object.create(X.prototype)).constructor=le,(ue.prototype=Object.create(X.prototype)).constructor=ue,(z.prototype=Object.create(z.prototype)).constructor=z,(H.prototype=Object.create(X.prototype)).constructor=H,_},void 0!==(r=D.apply(Oe,[]))&&(at.exports=r)}}]);