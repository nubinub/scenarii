(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[753],{1753:(_t,Ie,D)=>{"use strict";D.r(Ie),D.d(Ie,{LoaderModule:()=>ei});var Y=D(9808),r=D(1223),ve=D(2076),N=D(8306),ce=D(4742),Ce=D(8421),be=D(7669),Re=D(5403),y=D(3268),fe=D(1810),pe=D(4004);let ge=(()=>{class t{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.Qsj),r.Y36(r.SBq))},t.\u0275dir=r.lG2({type:t}),t})(),K=(()=>{class t extends ge{}return t.\u0275fac=function(){let n;return function(i){return(n||(n=r.n5z(t)))(i||t)}}(),t.\u0275dir=r.lG2({type:t,features:[r.qOj]}),t})();const $=new r.OlP("NgValueAccessor"),Me={provide:$,useExisting:(0,r.Gpc)(()=>me),multi:!0},Ge=new r.OlP("CompositionEventMode");let me=(()=>{class t extends ge{constructor(e,i,o){super(e,i),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=(0,Y.q)()?(0,Y.q)().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.Qsj),r.Y36(r.SBq),r.Y36(Ge,8))},t.\u0275dir=r.lG2({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,i){1&e&&r.NdJ("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[r._Bn([Me]),r.qOj]}),t})();function ne(t){return null==t||0===t.length}function ie(t){return null!=t&&"number"==typeof t.length}const b=new r.OlP("NgValidators"),l=new r.OlP("NgAsyncValidators"),a=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class u{static min(n){return t=n,n=>{if(ne(n.value)||ne(t))return null;const e=parseFloat(n.value);return!isNaN(e)&&e<t?{min:{min:t,actual:n.value}}:null};var t}static max(n){return t=n,n=>{if(ne(n.value)||ne(t))return null;const e=parseFloat(n.value);return!isNaN(e)&&e>t?{max:{max:t,actual:n.value}}:null};var t}static required(n){return ne(n.value)?{required:!0}:null}static requiredTrue(n){return!0===n.value?null:{required:!0}}static email(n){return ne((t=n).value)||a.test(t.value)?null:{email:!0};var t}static minLength(n){return t=n,n=>ne(n.value)||!ie(n.value)?null:n.value.length<t?{minlength:{requiredLength:t,actualLength:n.value.length}}:null;var t}static maxLength(n){return t=n,n=>ie(n.value)&&n.value.length>t?{maxlength:{requiredLength:t,actualLength:n.value.length}}:null;var t}static pattern(n){return function(t){if(!t)return m;let n,e;return"string"==typeof t?(e="","^"!==t.charAt(0)&&(e+="^"),e+=t,"$"!==t.charAt(t.length-1)&&(e+="$"),n=new RegExp(e)):(e=t.toString(),n=t),i=>{if(ne(i.value))return null;const o=i.value;return n.test(o)?null:{pattern:{requiredPattern:e,actualValue:o}}}}(n)}static nullValidator(n){return null}static compose(n){return P(n)}static composeAsync(n){return G(n)}}function m(t){return null}function ee(t){return null!=t}function L(t){const n=(0,r.QGY)(t)?(0,ve.D)(t):t;return(0,r.CqO)(n),n}function d(t){let n={};return t.forEach(e=>{n=null!=e?Object.assign(Object.assign({},n),e):n}),0===Object.keys(n).length?null:n}function F(t,n){return n.map(e=>e(t))}function j(t){return t.map(n=>function(t){return!t.validate}(n)?n:e=>n.validate(e))}function P(t){if(!t)return null;const n=t.filter(ee);return 0==n.length?null:function(e){return d(F(e,n))}}function R(t){return null!=t?P(j(t)):null}function G(t){if(!t)return null;const n=t.filter(ee);return 0==n.length?null:function(e){return function(...t){const n=(0,be.jO)(t),{args:e,keys:i}=(0,ce.D)(t),o=new N.y(s=>{const{length:c}=e;if(!c)return void s.complete();const V=new Array(c);let Q=c,C=c;for(let z=0;z<c;z++){let ue=!1;(0,Ce.Xf)(e[z]).subscribe(new Re.Q(s,W=>{ue||(ue=!0,C--),V[z]=W},()=>Q--,void 0,()=>{(!Q||!ue)&&(C||s.next(i?(0,fe.n)(i,V):V),s.complete())}))}});return n?o.pipe((0,y.Z)(n)):o}(F(e,n).map(L)).pipe((0,pe.U)(d))}}function g(t){return null!=t?G(j(t)):null}function E(t,n){return null===t?[n]:Array.isArray(t)?[...t,n]:[t,n]}function O(t){return t._rawValidators}function S(t){return t._rawAsyncValidators}function x(t){return t?Array.isArray(t)?t:[t]:[]}function A(t,n){return Array.isArray(t)?t.includes(n):t===n}function U(t,n){const e=x(n);return x(t).forEach(o=>{A(e,o)||e.push(o)}),e}function _(t,n){return x(n).filter(e=>!A(t,e))}class J{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=R(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=g(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n){this.control&&this.control.reset(n)}hasError(n,e){return!!this.control&&this.control.hasError(n,e)}getError(n,e){return this.control?this.control.getError(n,e):null}}class B extends J{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class M extends J{get formDirective(){return null}get path(){return null}}class oe{constructor(n){this._cd=n}is(n){var e,i,o;return"submitted"===n?!!(null===(e=this._cd)||void 0===e?void 0:e.submitted):!!(null===(o=null===(i=this._cd)||void 0===i?void 0:i.control)||void 0===o?void 0:o[n])}}let q=(()=>{class t extends oe{constructor(e){super(e)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(B,2))},t.\u0275dir=r.lG2({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,i){2&e&&r.ekj("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))},features:[r.qOj]}),t})(),X=(()=>{class t extends oe{constructor(e){super(e)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(M,10))},t.\u0275dir=r.lG2({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,i){2&e&&r.ekj("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))("ng-submitted",i.is("submitted"))},features:[r.qOj]}),t})();function Fe(t,n){Xe(t,n),n.valueAccessor.writeValue(t.value),function(t,n){n.valueAccessor.registerOnChange(e=>{t._pendingValue=e,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&yt(t,n)})}(t,n),function(t,n){const e=(i,o)=>{n.valueAccessor.writeValue(i),o&&n.viewToModelUpdate(i)};t.registerOnChange(e),n._registerOnDestroy(()=>{t._unregisterOnChange(e)})}(t,n),function(t,n){n.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&yt(t,n),"submit"!==t.updateOn&&t.markAsTouched()})}(t,n),function(t,n){if(n.valueAccessor.setDisabledState){const e=i=>{n.valueAccessor.setDisabledState(i)};t.registerOnDisabledChange(e),n._registerOnDestroy(()=>{t._unregisterOnDisabledChange(e)})}}(t,n)}function Pe(t,n,e=!0){const i=()=>{};n.valueAccessor&&(n.valueAccessor.registerOnChange(i),n.valueAccessor.registerOnTouched(i)),qe(t,n),t&&(n._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Be(t,n){t.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(n)})}function Xe(t,n){const e=O(t);null!==n.validator?t.setValidators(E(e,n.validator)):"function"==typeof e&&t.setValidators([e]);const i=S(t);null!==n.asyncValidator?t.setAsyncValidators(E(i,n.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]);const o=()=>t.updateValueAndValidity();Be(n._rawValidators,o),Be(n._rawAsyncValidators,o)}function qe(t,n){let e=!1;if(null!==t){if(null!==n.validator){const o=O(t);if(Array.isArray(o)&&o.length>0){const s=o.filter(c=>c!==n.validator);s.length!==o.length&&(e=!0,t.setValidators(s))}}if(null!==n.asyncValidator){const o=S(t);if(Array.isArray(o)&&o.length>0){const s=o.filter(c=>c!==n.asyncValidator);s.length!==o.length&&(e=!0,t.setAsyncValidators(s))}}}const i=()=>{};return Be(n._rawValidators,i),Be(n._rawAsyncValidators,i),e}function yt(t,n){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function Le(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}const Se="VALID",je="INVALID",we="PENDING",Te="DISABLED";function tt(t){return(rt(t)?t.validators:t)||null}function bt(t){return Array.isArray(t)?R(t):t||null}function nt(t,n){return(rt(n)?n.asyncValidators:t)||null}function At(t){return Array.isArray(t)?g(t):t||null}function rt(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class it{constructor(n,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=n,this._rawAsyncValidators=e,this._composedValidatorFn=bt(this._rawValidators),this._composedAsyncValidatorFn=At(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get valid(){return this.status===Se}get invalid(){return this.status===je}get pending(){return this.status==we}get disabled(){return this.status===Te}get enabled(){return this.status!==Te}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._rawValidators=n,this._composedValidatorFn=bt(n)}setAsyncValidators(n){this._rawAsyncValidators=n,this._composedAsyncValidatorFn=At(n)}addValidators(n){this.setValidators(U(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(U(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(_(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(_(n,this._rawAsyncValidators))}hasValidator(n){return A(this._rawValidators,n)}hasAsyncValidator(n){return A(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){this.touched=!0,this._parent&&!n.onlySelf&&this._parent.markAsTouched(n)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(n=>n.markAllAsTouched())}markAsUntouched(n={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}markAsDirty(n={}){this.pristine=!1,this._parent&&!n.onlySelf&&this._parent.markAsDirty(n)}markAsPristine(n={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}markAsPending(n={}){this.status=we,!1!==n.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!n.onlySelf&&this._parent.markAsPending(n)}disable(n={}){const e=this._parentMarkedDirty(n.onlySelf);this.status=Te,this.errors=null,this._forEachChild(i=>{i.disable(Object.assign(Object.assign({},n),{onlySelf:!0}))}),this._updateValue(),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},n),{skipPristineCheck:e})),this._onDisabledChange.forEach(i=>i(!0))}enable(n={}){const e=this._parentMarkedDirty(n.onlySelf);this.status=Se,this._forEachChild(i=>{i.enable(Object.assign(Object.assign({},n),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},n),{skipPristineCheck:e})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(n){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(n){this._parent=n}updateValueAndValidity(n={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Se||this.status===we)&&this._runAsyncValidator(n.emitEvent)),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(n)}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Te:Se}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n){if(this.asyncValidator){this.status=we,this._hasOwnPendingAsyncValidator=!0;const e=L(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:n})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(n,e={}){this.errors=n,this._updateControlsErrors(!1!==e.emitEvent)}get(n){return function(t,n,e){if(null==n||(Array.isArray(n)||(n=n.split(".")),Array.isArray(n)&&0===n.length))return null;let i=t;return n.forEach(o=>{i=i instanceof Ne?i.controls.hasOwnProperty(o)?i.controls[o]:null:i instanceof ot&&i.at(o)||null}),i}(this,n)}getError(n,e){const i=e?this.get(e):this;return i&&i.errors?i.errors[n]:null}hasError(n,e){return!!this.getError(n,e)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(n)}_initObservables(){this.valueChanges=new r.vpe,this.statusChanges=new r.vpe}_calculateStatus(){return this._allControlsDisabled()?Te:this.errors?je:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(we)?we:this._anyControlsHaveStatus(je)?je:Se}_anyControlsHaveStatus(n){return this._anyControls(e=>e.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n={}){this.pristine=!this._anyControlsDirty(),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}_updateTouched(n={}){this.touched=this._anyControlsTouched(),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}_isBoxedValue(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){rt(n)&&null!=n.updateOn&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){return!n&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class De extends it{constructor(n=null,e,i){super(tt(e),nt(i,e)),this._onChange=[],this._pendingChange=!1,this._applyFormState(n),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(n,e={}){this.value=this._pendingValue=n,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(n,e={}){this.setValue(n,e)}reset(n=null,e={}){this._applyFormState(n),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){Le(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){Le(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(n){this._isBoxedValue(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}}class Ne extends it{constructor(n,e,i){super(tt(e),nt(i,e)),this.controls=n,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(n,e){return this.controls[n]?this.controls[n]:(this.controls[n]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(n,e,i={}){this.registerControl(n,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(n,e={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(n,e,i={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],e&&this.registerControl(n,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,e={}){this._checkAllValuesPresent(n),Object.keys(n).forEach(i=>{this._throwIfControlMissing(i),this.controls[i].setValue(n[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(n,e={}){null!=n&&(Object.keys(n).forEach(i=>{this.controls[i]&&this.controls[i].patchValue(n[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(n={},e={}){this._forEachChild((i,o)=>{i.reset(n[o],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(n,e,i)=>(n[i]=e instanceof De?e.value:e.getRawValue(),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(e,i)=>!!i._syncPendingControls()||e);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_throwIfControlMissing(n){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[n])throw new Error(`Cannot find form control with name: ${n}.`)}_forEachChild(n){Object.keys(this.controls).forEach(e=>{const i=this.controls[e];i&&n(i,e)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(const e of Object.keys(this.controls)){const i=this.controls[e];if(this.contains(e)&&n(i))return!0}return!1}_reduceValue(){return this._reduceChildren({},(n,e,i)=>((e.enabled||this.disabled)&&(n[i]=e.value),n))}_reduceChildren(n,e){let i=n;return this._forEachChild((o,s)=>{i=e(i,o,s)}),i}_allControlsDisabled(){for(const n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(n){this._forEachChild((e,i)=>{if(void 0===n[i])throw new Error(`Must supply a value for form control with name: '${i}'.`)})}}class ot extends it{constructor(n,e,i){super(tt(e),nt(i,e)),this.controls=n,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(n){return this.controls[n]}push(n,e={}){this.controls.push(n),this._registerControl(n),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(n,e,i={}){this.controls.splice(n,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(n,e={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(n,e,i={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),e&&(this.controls.splice(n,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(n,e={}){this._checkAllValuesPresent(n),n.forEach((i,o)=>{this._throwIfControlMissing(o),this.at(o).setValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(n,e={}){null!=n&&(n.forEach((i,o)=>{this.at(o)&&this.at(o).patchValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(n=[],e={}){this._forEachChild((i,o)=>{i.reset(n[o],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(n=>n instanceof De?n.value:n.getRawValue())}clear(n={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:n.emitEvent}))}_syncPendingControls(){let n=this.controls.reduce((e,i)=>!!i._syncPendingControls()||e,!1);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_throwIfControlMissing(n){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(n))throw new Error(`Cannot find form control at index ${n}`)}_forEachChild(n){this.controls.forEach((e,i)=>{n(e,i)})}_updateValue(){this.value=this.controls.filter(n=>n.enabled||this.disabled).map(n=>n.value)}_anyControls(n){return this.controls.some(e=>e.enabled&&n(e))}_setUpControls(){this._forEachChild(n=>this._registerControl(n))}_checkAllValuesPresent(n){this._forEachChild((e,i)=>{if(void 0===n[i])throw new Error(`Must supply a value for form control at index: ${i}.`)})}_allControlsDisabled(){for(const n of this.controls)if(n.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(n){n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)}}let He=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})(),Mt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})();const at=new r.OlP("NgModelWithFormControlWarning"),xn={provide:M,useExisting:(0,r.Gpc)(()=>xe)};let xe=(()=>{class t extends M{constructor(e,i){super(),this.validators=e,this.asyncValidators=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new r.vpe,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(qe(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const i=this.form.get(e.path);return Fe(i,e),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){Pe(e.control||null,e,!1),Le(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this.submitted=!0,function(t,n){t._syncPendingControls(),n.forEach(e=>{const i=e.control;"submit"===i.updateOn&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const i=e.control,o=this.form.get(e.path);i!==o&&(Pe(i||null,e),o instanceof De&&(Fe(o,e),e.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const i=this.form.get(e.path);(function(t,n){Xe(t,n)})(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const i=this.form.get(e.path);i&&function(t,n){return qe(t,n)}(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Xe(this.form,this),this._oldForm&&qe(this._oldForm,this)}_checkFormPresent(){}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(b,10),r.Y36(l,10))},t.\u0275dir=r.lG2({type:t,selectors:[["","formGroup",""]],hostBindings:function(e,i){1&e&&r.NdJ("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r._Bn([xn]),r.qOj,r.TTD]}),t})();const On={provide:B,useExisting:(0,r.Gpc)(()=>Ye)};let Ye=(()=>{class t extends B{constructor(e,i,o,s,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.update=new r.vpe,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=function(t,n){if(!n)return null;let e,i,o;return Array.isArray(n),n.forEach(s=>{s.constructor===me?e=s:function(t){return Object.getPrototypeOf(t.constructor)===K}(s)?i=s:o=s}),o||i||e||null}(0,s)}set isDisabled(e){}ngOnChanges(e){this._added||this._setUpControl(),function(t,n){if(!t.hasOwnProperty("model"))return!1;const e=t.model;return!!e.isFirstChange()||!Object.is(n,e.currentValue)}(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return function(t,n){return[...n.path,t]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return t._ngModelWarningSentOnce=!1,t.\u0275fac=function(e){return new(e||t)(r.Y36(M,13),r.Y36(b,10),r.Y36(l,10),r.Y36($,10),r.Y36(at,8))},t.\u0275dir=r.lG2({type:t,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[r._Bn([On]),r.qOj,r.TTD]}),t})();const Fn={provide:$,useExisting:(0,r.Gpc)(()=>Je),multi:!0};function Nt(t,n){return null==t?`${n}`:(n&&"object"==typeof n&&(n="Object"),`${t}: ${n}`.slice(0,50))}let Je=(()=>{class t extends K{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;const i=this._getOptionId(e);null==i&&this.setProperty("selectedIndex",-1);const o=Nt(i,e);this.setProperty("value",o)}registerOnChange(e){this.onChange=i=>{this.value=this._getOptionValue(i),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const i of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(i),e))return i;return null}_getOptionValue(e){const i=function(t){return t.split(":")[0]}(e);return this._optionMap.has(i)?this._optionMap.get(i):e}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=r.n5z(t)))(i||t)}}(),t.\u0275dir=r.lG2({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,i){1&e&&r.NdJ("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[r._Bn([Fn]),r.qOj]}),t})(),kt=(()=>{class t{constructor(e,i,o){this._element=e,this._renderer=i,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(Nt(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(Je,9))},t.\u0275dir=r.lG2({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();const Tn={provide:$,useExisting:(0,r.Gpc)(()=>ct),multi:!0};function It(t,n){return null==t?`${n}`:("string"==typeof n&&(n=`'${n}'`),n&&"object"==typeof n&&(n="Object"),`${t}: ${n}`.slice(0,50))}let ct=(()=>{class t extends K{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){let i;if(this.value=e,Array.isArray(e)){const o=e.map(s=>this._getOptionId(s));i=(s,c)=>{s._setSelected(o.indexOf(c.toString())>-1)}}else i=(o,s)=>{o._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(e){this.onChange=i=>{const o=[],s=i.selectedOptions;if(void 0!==s){const c=s;for(let V=0;V<c.length;V++){const C=this._getOptionValue(c[V].value);o.push(C)}}else{const c=i.options;for(let V=0;V<c.length;V++){const Q=c[V];if(Q.selected){const C=this._getOptionValue(Q.value);o.push(C)}}}this.value=o,e(o)}}_registerOption(e){const i=(this._idCounter++).toString();return this._optionMap.set(i,e),i}_getOptionId(e){for(const i of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(i)._value,e))return i;return null}_getOptionValue(e){const i=function(t){return t.split(":")[0]}(e);return this._optionMap.has(i)?this._optionMap.get(i)._value:e}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=r.n5z(t)))(i||t)}}(),t.\u0275dir=r.lG2({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,i){1&e&&r.NdJ("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[r._Bn([Tn]),r.qOj]}),t})(),Rt=(()=>{class t{constructor(e,i,o){this._element=e,this._renderer=i,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(It(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(It(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(ct,9))},t.\u0275dir=r.lG2({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})(),qn=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[Mt]]}),t})(),Yt=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:at,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[qn]}),t})(),ht=(()=>{class t{group(e,i=null){const o=this._reduceControls(e);let V,s=null,c=null;return null!=i&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(i)?(s=null!=i.validators?i.validators:null,c=null!=i.asyncValidators?i.asyncValidators:null,V=null!=i.updateOn?i.updateOn:void 0):(s=null!=i.validator?i.validator:null,c=null!=i.asyncValidator?i.asyncValidator:null)),new Ne(o,{asyncValidators:c,updateOn:V,validators:s})}control(e,i,o){return new De(e,i,o)}array(e,i,o){const s=e.map(c=>this._createControl(c));return new ot(s,i,o)}_reduceControls(e){const i={};return Object.keys(e).forEach(o=>{i[o]=this._createControl(e[o])}),i}_createControl(e){return e instanceof De||e instanceof Ne||e instanceof ot?e:Array.isArray(e)?this.control(e[0],e.length>1?e[1]:null,e.length>2?e[2]:null):this.control(e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:Yt}),t})();var jn=D(1431),he=D(8855),ft=D(8466),pt=D(5243),Hn=D(7688),Jt=D(8675);function Yn(t,n){1&t&&(r.ynx(0),r._uU(1," A file is currently loaded and used. You can configure the columns, "),r.TgZ(2,"a",3),r._uU(3,"run the scenarios"),r.qZA(),r._uU(4,", "),r.TgZ(5,"a",4),r._uU(6,"list all the scenarios"),r.qZA(),r._uU(7," or reset the progression using the button below. "),r.BQk())}function Jn(t,n){1&t&&r._uU(0," To start a test, you need to load a file. ")}let zn=(()=>{class t{constructor(e){this.isRunning=e.registryUpdated.pipe((0,Jt.O)(e.getAll()),(0,pe.U)(i=>i.length>0))}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(ft.z))},t.\u0275cmp=r.Xpm({type:t,selectors:[["scenarii-status"]],outputs:{isRunning:"isRunning"},decls:5,vars:4,consts:[[1,"mb-3","bg-blue-50","border-0","border-gray-800","p-3","rounded-md","shadow-sm","text-gray-800"],[4,"ngIf","ngIfElse"],["noFile",""],["routerLink","/run",1,"cursor-pointer","text-indigo-600","hover:text-indigo-500","focus-within:outline-none","focus-within:ring-2","focus-within:ring-offset-2","focus-within:ring-indigo-500"],["routerLink","/scenarios",1,"cursor-pointer","text-indigo-600","hover:text-indigo-500","focus-within:outline-none","focus-within:ring-2","focus-within:ring-offset-2","focus-within:ring-indigo-500"]],template:function(e,i){if(1&e&&(r.TgZ(0,"div",0),r.YNc(1,Yn,8,0,"ng-container",1),r.ALo(2,"async"),r.YNc(3,Jn,1,0,"ng-template",null,2,r.W1O),r.qZA()),2&e){const o=r.MAs(4);r.xp6(1),r.Q6J("ngIf",r.lcZ(2,2,i.isRunning))("ngIfElse",o)}},directives:[Y.O5,he.yS],pipes:[Y.Ov],styles:["[_nghost-%COMP%]{display:contents}"]}),t})();var Kn=D(7579),er=D(727),tr=D(4482),nr=D(5032);const ir=r.GuJ,sr=Symbol("__destroy"),$t=Symbol("__decoratorApplied");function Xt(t){return"string"==typeof t?Symbol(`__destroy__${t}`):sr}function Kt(t,n){t[n]||(t[n]=new Kn.x)}function en(t,n){t[n]&&(t[n].next(),t[n].complete(),t[n]=null)}function tn(t){t instanceof er.w0&&t.unsubscribe()}function nn(t,n){return function(){var e;if(t&&t.call(this),en(this,Xt()),n.arrayName)return function(t){Array.isArray(t)&&t.forEach(tn)}(this[n.arrayName]);if(n.checkProperties)for(const i in this)(null===(e=n.blackList)||void 0===e?void 0:e.includes(i))||tn(this[i])}}var rn=D(801);const pr=(t,n)=>e=>(n||(n=Object.keys(e.controls)),e&&e.controls&&n.some(o=>!t(e.controls[o]))?null:{atLeastOneOf:!0}),gr=(t,n)=>e=>(n||(n=Object.keys(e.controls)),e&&e.controls&&n.filter(o=>!t(e.controls[o])).length>1?{onlyOneOf:!0}:null),mr=(t=[])=>(t=t.map(n=>n.toLocaleLowerCase()),n=>{const e=n.value;return 0===t.length||!e||t.includes(e.type.toLocaleLowerCase())?null:{requiredFileType:!0}});var on=D(3028);let sn=(()=>{class t{parseFile(e){return(0,ve.D)(new Promise((i,o)=>(0,on.parse)(e,{download:!1,header:!0,worker:!0,complete:s=>i(s.data),error:s=>o(s)})))}parseURL(e){return(0,ve.D)(new Promise((i,o)=>(0,on.parse)(e,{download:!0,header:!0,worker:!0,complete:s=>i(s.data),error:s=>o(s)})))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var _r=D(5074);let Qe=(()=>{class t{constructor(e){this.dataManager=e,this.historyChanged=new r.vpe}list(){var e;return null!==(e=this.dataManager.get(t.STORAGE_ID))&&void 0!==e?e:[]}add(e){let i=this.list();i=i.filter(o=>o!==e),i.unshift(e),i=i.slice(0,10),this.setHistory(i)}remove(e){const i=this.list().filter(o=>o!==e);this.setHistory(i)}clearAll(){this.dataManager.delete(t.STORAGE_ID),this.historyChanged.emit([])}setHistory(e){this.dataManager.set(t.STORAGE_ID,e),this.historyChanged.emit(e)}}return t.STORAGE_ID="remote-file-history",t.\u0275fac=function(e){return new(e||t)(r.LFG(_r.L))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var yr=D(8505),vr=D(1135);let Cr=(()=>{class t{constructor(){this.fileDrop=new r.vpe,this.dragOver=new vr.X(!1),this.preventBodyDrop=!0,this.active=!1}onDrop(e){e.preventDefault(),this.active=!1,this.dragOver.next(!1);const{dataTransfer:i}=e;if(!i)return;let o=[];i.items?(o=Array.from(i.items).filter(s=>"file"===s.kind).map(s=>s.getAsFile()).filter(s=>!!s),i.items.clear()):(o=Array.from(i.files),i.clearData()),this.fileDrop.emit(Array.from(o))}onDragOver(e){e.stopPropagation(),e.preventDefault(),this.active=!0,this.dragOver.next(!0)}onDragLeave(){this.active=!1,this.dragOver.next(!1)}onBodyDragOver(e){this.preventBodyDrop&&(e.preventDefault(),e.stopPropagation())}onBodyDrop(e){this.preventBodyDrop&&e.preventDefault()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["","scenariiDragAndDrop",""]],hostVars:2,hostBindings:function(e,i){1&e&&r.NdJ("drop",function(s){return i.onDrop(s)})("dragover",function(s){return i.onDragOver(s)})("dragleave",function(s){return i.onDragLeave(s)})("dragover",function(s){return i.onBodyDragOver(s)},!1,r.pYS)("drop",function(s){return i.onBodyDrop(s)},!1,r.pYS),2&e&&r.ekj("drop-zone-active",i.active)},inputs:{preventBodyDrop:"preventBodyDrop"},outputs:{fileDrop:"fileDrop",dragOver:"dragOver"}}),t})();var an=D(9444);let br=(()=>{class t{transform(e,i=""){return e.map(o=>`${i}.${o}`).join(",")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=r.Yjl({name:"extensionList",type:t,pure:!0}),t})();function Ar(t,n){if(1&t){const e=r.EpF();r.TgZ(0,"div",8),r.TgZ(1,"label",9),r.TgZ(2,"span"),r._uU(3,"Upload a file"),r.qZA(),r.TgZ(4,"input",10),r.NdJ("change",function(o){return r.CHM(e),r.oxw(2).onFileChange(o)}),r.ALo(5,"extensionList"),r.qZA(),r.qZA(),r.TgZ(6,"p",11),r._uU(7,"or drag and drop"),r.qZA(),r.qZA()}if(2&t){const e=r.oxw(2);r.xp6(4),r.s9C("accept",r.lcZ(5,1,e.extensions))}}function Vr(t,n){1&t&&(r.TgZ(0,"div",12),r._uU(1,"Drop the file here"),r.qZA())}function wr(t,n){if(1&t){const e=r.EpF();r.TgZ(0,"div",2),r.NdJ("fileDrop",function(o){return r.CHM(e),r.oxw().onFileDropped(o)})("dragOver",function(o){return r.CHM(e),r.oxw().isOver=o}),r.TgZ(1,"div",3),r._UZ(2,"fa-icon",4),r.YNc(3,Ar,8,3,"div",5),r.YNc(4,Vr,2,0,"ng-template",null,6,r.W1O),r.TgZ(6,"p",7),r._uU(7),r.ALo(8,"extensionList"),r.qZA(),r.qZA(),r.qZA()}if(2&t){const e=r.MAs(5),i=r.oxw();r.xp6(2),r.Q6J("icon",i.faFileUpload),r.xp6(1),r.Q6J("ngIf",!i.isOver)("ngIfElse",e),r.xp6(4),r.hij(" ",r.xi3(8,4,i.extensions,"*")," up to 10MB ")}}function Dr(t,n){if(1&t){const e=r.EpF();r.TgZ(0,"div",13),r._uU(1," Currently selected: "),r.TgZ(2,"span",14),r._uU(3),r.qZA(),r.TgZ(4,"span",15),r._uU(5,"("),r.TgZ(6,"button",16),r.NdJ("click",function(){return r.CHM(e),r.oxw().onClear()}),r._uU(7," remove"),r.qZA(),r._uU(8,")"),r.qZA(),r.qZA()}if(2&t){const e=r.oxw();r.xp6(3),r.Oqu(null==e.file?null:e.file.name)}}let xr=(()=>{class t{constructor(){this.extensions=[],this.faFileUpload=rn.Y9i,this.file=null,this.isOver=!1,this.onChange=()=>{},this.onTouched=()=>{}}writeValue(e){e&&(this.file=e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}onFileChange(e){var i;this.file=(null===(i=e.target.files)||void 0===i?void 0:i[0])||null,this.onChange(this.file)}onClear(){this.file=null,this.onChange(null)}onFileDropped(e){const i=e[0];!i||(this.file=i,this.onChange(this.file))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["scenarii-file-upload"]],inputs:{extensions:"extensions"},features:[r._Bn([{provide:$,useExisting:(0,r.Gpc)(()=>t),multi:!0}])],decls:3,vars:2,consts:[["class","mt-6 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md","scenariiDragAndDrop","",3,"fileDrop","dragOver",4,"ngIf","ngIfElse"],["fileSelected",""],["scenariiDragAndDrop","",1,"mt-6","flex","justify-center","px-6","pt-5","pb-6","border-2","border-gray-300","border-dashed","rounded-md",3,"fileDrop","dragOver"],[1,"space-y-1","text-center","text-gray-600"],[1,"text-2xl",3,"icon"],["class","flex text-sm",4,"ngIf","ngIfElse"],["dragOver",""],[1,"text-xs","text-gray-500"],[1,"flex","text-sm"],["for","file-upload",1,"relative","cursor-pointer","bg-white","rounded-md","font-medium","text-indigo-600","hover:text-indigo-500","focus-within:outline-none","focus-within:ring-2","focus-within:ring-offset-2","focus-within:ring-indigo-500"],["id","file-upload","name","file-upload","type","file",1,"sr-only",3,"accept","change"],[1,"pl-1"],[1,"text-sm"],[1,"mt-3","text-sm","text-center","px-6","pt-5","pb-6","border-2","border-gray-300","border-dashed","rounded-sm","text-gray-400"],[1,"text-gray-800"],[1,"ml-3","text-sm"],[1,"relative","cursor-pointer","bg-white","rounded-md","font-medium","text-indigo-600","hover:text-indigo-500","focus-within:outline-none","focus-within:ring-2","focus-within:ring-offset-2","focus-within:ring-indigo-500",3,"click"]],template:function(e,i){if(1&e&&(r.YNc(0,wr,9,7,"div",0),r.YNc(1,Dr,9,1,"ng-template",null,1,r.W1O)),2&e){const o=r.MAs(2);r.Q6J("ngIf",!i.file)("ngIfElse",o)}},directives:[Y.O5,Cr,an.BN],pipes:[br],styles:[""]}),t})();function Er(t,n){if(1&t&&(r.TgZ(0,"div"),r._uU(1),r.qZA()),2&t){const e=r.oxw(2);r.xp6(1),r.hij(" ",e.message," ")}}function Mr(t,n){if(1&t&&(r.TgZ(0,"div",1),r.YNc(1,Er,2,1,"div",2),r.qZA()),2&t){const e=r.oxw();r.xp6(1),r.Q6J("ngIf",null==e.control.errors?null:e.control.errors[e.errorName])}}let ln=(()=>{class t{constructor(){this.control=null,this.message="This field is invalid",this.errorName=null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["scenarii-form-error"]],inputs:{control:"control",message:"message",errorName:"errorName"},decls:1,vars:1,consts:[["class","text-red-500",4,"ngIf"],[1,"text-red-500"],[4,"ngIf"]],template:function(e,i){1&e&&r.YNc(0,Mr,2,1,"div",0),2&e&&r.Q6J("ngIf",i.errorName&&i.control&&i.control&&i.control.invalid&&(i.control.dirty||i.control.touched))},directives:[Y.O5],styles:[""]}),t})();const Or=function(){return["csv"]};let ye=class{constructor(n,e,i,o,s){this.csvParser=e,this.fileHistory=i,this.route=o,this.router=s,this.csvUploaded=new r.vpe,this.faTimesCircle=rn.nYk,this.currentFile=null,this.form=n.group({url:["",u.pattern("https?://.{2,}")],file:[null,[mr(["text/csv","application/vnd.ms-excel","application/csv"])]]},{validators:[pr(u.required),gr(u.required)]}),this.route.queryParams.pipe(function(t,n){return e=>{const i=Xt(n);return"string"==typeof n?function(t,n,e){const i=t[n];Kt(t,e),t[n]=function(){i.apply(this,arguments),en(this,e),t[n]=i}}(t,n,i):Kt(t,i),e.pipe(function(t){return(0,tr.e)((n,e)=>{(0,Ce.Xf)(t).subscribe(new Re.Q(e,()=>e.complete(),nr.Z)),!e.closed&&n.subscribe(e)})}(t[i]))}}(this)).subscribe(c=>{!c.url||this.form.patchValue({url:c.url})})}get url(){return this.form.get("url")}get file(){return this.form.get("file")}onSubmit(){(this.form.value.file?this.useLocalFile(this.form.value.file):this.useRemoteUrl(this.form.value.url)).subscribe(n=>{this.csvUploaded.emit(n)})}onClearUrl(){!this.url||(this.url.reset(),this.router.navigateByUrl("/load"))}useLocalFile(n){return this.csvParser.parseFile(n)}useRemoteUrl(n){return this.csvParser.parseURL(n).pipe((0,yr.b)(()=>{this.fileHistory.add(n)}))}};ye.\u0275fac=function(n){return new(n||ye)(r.Y36(ht),r.Y36(sn),r.Y36(Qe),r.Y36(he.gz),r.Y36(he.F0))},ye.\u0275cmp=r.Xpm({type:ye,selectors:[["scenarii-csv-uploader"]],outputs:{csvUploaded:"csvUploaded"},decls:24,vars:15,consts:[[3,"formGroup","ngSubmit"],[1,"shadow","sm:rounded-md","sm:overflow-hidden"],[1,"px-4","py-5","bg-white","sm:p-6","space-y-6"],[1,"text-lg","font-medium","leading-6","text-gray-900"],[1,"text-sm","text-gray-500","mt-1","italic"],["name","file","formControlName","file",3,"extensions"],["errorName","requiredFileType","message","The selected file is not a CSV file.",3,"control"],[1,""],[1,"mt-1","flex","rounded-md","shadow-sm"],["type","text","name","url","placeholder","http://www.example.com","formControlName","url",1,"focus:ring-gray-500","focus:border-gray-500","flex-1","block","w-full","rounded-l-md","sm:text-sm","border-gray-300"],[1,"py-1","px-2.5","rounded-r-md","border-y","border-r","border-gray-300","focus:ring-gray-500","focus:border-gray-500","block","bg-gray-300","hover:bg-gray-200","text-gray-800",3,"click"],[3,"icon"],["errorName","pattern","message","The url is malformed.",3,"control"],[1,"px-4","py-3","bg-gray-50","text-right","sm:px-6"],["type","submit",1,"inline-flex","justify-center","py-2","px-4","border","border-transparent","shadow-sm","text-sm","font-medium","rounded-md","text-white","bg-gray-600","hover:bg-gray-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500","disabled:bg-gray-200",3,"disabled"]],template:function(n,e){1&n&&(r.TgZ(0,"form",0),r.NdJ("ngSubmit",function(){return e.onSubmit()}),r.TgZ(1,"div",1),r.TgZ(2,"div",2),r.TgZ(3,"div"),r.TgZ(4,"h3",3),r._uU(5," Use a local file "),r.qZA(),r.TgZ(6,"p",4),r._uU(7," Select a file on your computer to upload or drop it. "),r.qZA(),r.qZA(),r._UZ(8,"scenarii-file-upload",5),r._UZ(9,"scenarii-form-error",6),r.TgZ(10,"div"),r.TgZ(11,"h3",3),r._uU(12," Or a remote file "),r.qZA(),r.TgZ(13,"p",4),r._uU(14," Fill an URL to download a remote CSV file. "),r.qZA(),r.qZA(),r.TgZ(15,"div",7),r.TgZ(16,"div",8),r._UZ(17,"input",9),r.TgZ(18,"button",10),r.NdJ("click",function(){return e.onClearUrl()}),r._UZ(19,"fa-icon",11),r.qZA(),r.qZA(),r._UZ(20,"scenarii-form-error",12),r.qZA(),r.qZA(),r.TgZ(21,"div",13),r.TgZ(22,"button",14),r._uU(23," Upload "),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&n&&(r.Q6J("formGroup",e.form),r.xp6(8),r.Q6J("extensions",r.DdM(14,Or)),r.xp6(1),r.Q6J("control",e.file),r.xp6(8),r.ekj("focus:ring-red-500",null==e.url?null:e.url.invalid)("focus:border-red-500",null==e.url?null:e.url.invalid)("focus:border-red-300",null==e.url?null:e.url.invalid)("border-red-500",null==e.url?null:e.url.invalid),r.xp6(2),r.Q6J("icon",e.faTimesCircle),r.xp6(1),r.Q6J("control",e.url),r.xp6(2),r.Q6J("disabled",!e.form.valid))},directives:[He,X,xe,xr,q,Ye,ln,me,an.BN],styles:[""]}),ye=function(t,n,e,i){var c,o=arguments.length,s=o<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,n,e,i);else for(var V=t.length-1;V>=0;V--)(c=t[V])&&(s=(o<3?c(s):o>3?c(n,e,s):c(n,e))||s);return o>3&&s&&Object.defineProperty(n,e,s),s}([function(t={}){return n=>{!function(t){return!!t[ir]}(n)?function(t,n){t.prototype.ngOnDestroy=nn(t.prototype.ngOnDestroy,n)}(n,t):function(t,n){const e=t.\u0275pipe;e.onDestroy=nn(e.onDestroy,n)}(n,t),function(t){t.prototype[$t]=!0}(n)}}(),function(t,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:paramtypes",n)}(0,[ht,sn,Qe,he.gz,he.F0])],ye);const Fr=function(t){return{url:t}};function Sr(t,n){if(1&t){const e=r.EpF();r.ynx(0),r.TgZ(1,"a",1),r._uU(2),r.qZA(),r.TgZ(3,"span",2),r._uU(4,"("),r.TgZ(5,"button",3),r.NdJ("click",function(){r.CHM(e);const o=r.oxw();return o.onRemove(o.url)}),r._uU(6," remove"),r.qZA(),r._uU(7,")"),r.qZA(),r.BQk()}if(2&t){const e=r.oxw();r.xp6(1),r.Q6J("queryParams",r.VKq(2,Fr,e.url)),r.xp6(1),r.Oqu(e.url)}}let Tr=(()=>{class t{constructor(e){this.fileHistory=e,this.url=null}onRemove(e){this.fileHistory.remove(e)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Qe))},t.\u0275cmp=r.Xpm({type:t,selectors:[["scenarii-file-history-item"]],inputs:{url:"url"},decls:1,vars:1,consts:[[4,"ngIf"],["routerLink","/load",1,"cursor-pointer","text-indigo-600","hover:text-indigo-500","focus-within:outline-none","focus-within:ring-2","focus-within:ring-offset-2","focus-within:ring-indigo-500",3,"queryParams"],[1,"text-sm","italic","ml-2","text-gray-400"],[1,"cursor-pointer","italic","text-indigo-400","hover:text-indigo-500","focus-within:outline-none","focus-within:ring-2","focus-within:ring-offset-2","focus-within:ring-indigo-500",3,"click"]],template:function(e,i){1&e&&r.YNc(0,Sr,8,4,"ng-container",0),2&e&&r.Q6J("ngIf",i.url)},directives:[Y.O5,he.yS],styles:[""]}),t})();function Nr(t,n){if(1&t&&(r.TgZ(0,"li"),r._UZ(1,"scenarii-file-history-item",9),r.qZA()),2&t){const e=n.$implicit;r.xp6(1),r.Q6J("url",e)}}function kr(t,n){if(1&t&&(r.TgZ(0,"ol",7),r.YNc(1,Nr,2,1,"li",8),r.qZA()),2&t){const e=r.oxw().ngIf;r.xp6(1),r.Q6J("ngForOf",e)}}function Ir(t,n){1&t&&(r.TgZ(0,"div",10),r._uU(1," No URL yet in your history "),r.qZA())}function Rr(t,n){if(1&t&&(r.ynx(0),r.YNc(1,kr,2,1,"ol",5),r.YNc(2,Ir,2,0,"ng-template",null,6,r.W1O),r.BQk()),2&t){const e=n.ngIf,i=r.MAs(3);r.xp6(1),r.Q6J("ngIf",e.length>0)("ngIfElse",i)}}let Ur=(()=>{class t{constructor(e){this.fileHistory=e,this.history$=this.fileHistory.historyChanged.pipe((0,Jt.O)(e.list()))}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Qe))},t.\u0275cmp=r.Xpm({type:t,selectors:[["scenarii-file-history"]],decls:9,vars:3,consts:[[1,"shadow","sm:rounded-md","sm:overflow-hidden"],[1,"px-4","py-5","bg-white","sm:p-6","space-y-6"],[1,"text-lg","font-medium","leading-6","text-gray-900"],[1,"text-sm","text-gray-500","mt-1","italic"],[4,"ngIf"],["class","space-y-1 list-decimal mx-4",4,"ngIf","ngIfElse"],["noUrl",""],[1,"space-y-1","list-decimal","mx-4"],[4,"ngFor","ngForOf"],[3,"url"],[1,"text-gray-500","italic","text-center","text-sm","py-6"]],template:function(e,i){1&e&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"div"),r.TgZ(3,"h3",2),r._uU(4," Select a file in your URL history "),r.qZA(),r.TgZ(5,"p",3),r._uU(6," We can only keep track of remote URL for now. "),r.qZA(),r.qZA(),r.YNc(7,Rr,4,2,"ng-container",4),r.ALo(8,"async"),r.qZA(),r.qZA()),2&e&&(r.xp6(7),r.Q6J("ngIf",r.lcZ(8,1,i.history$)))},directives:[Y.O5,Y.sg,Tr],pipes:[Y.Ov],styles:[""]}),t})(),Gr=(()=>{class t{constructor(e){this.csvConfiguration=e}convertToScenarios(e){const i=this.getConfiguration();return e.map(o=>this.convertToScenario(o,i))}getConfiguration(){return this.csvConfiguration.get("columns")}convertToScenario(e,i){return{id:this.getFieldValue(e,i.identifier),message:this.getFieldValue(e,i.message),category:this.getFieldValue(e,i.category),comment:this.getFieldValue(e,i.subcategory),dependency:this.getFieldValue(e,i.dependency),subcategory:this.getFieldValue(e,i.subcategory)}}getFieldValue(e,i){return i?`${e[i]}`:""}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(pt.j))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Zr(t,n){if(1&t&&(r.TgZ(0,"option",8),r._uU(1),r.qZA()),2&t){const e=n.$implicit;r.Q6J("value",e),r.xp6(1),r.hij(" ",e," ")}}function Pr(t,n){if(1&t&&r._UZ(0,"scenarii-form-error",9),2&t){const e=r.oxw(2);r.Q6J("control",e.control)}}function Br(t,n){if(1&t&&(r.TgZ(0,"div",1),r.TgZ(1,"div",2),r.TgZ(2,"label",3),r._uU(3),r.qZA(),r.TgZ(4,"select",4),r.TgZ(5,"option",5),r._uU(6,"Select a column"),r.qZA(),r.YNc(7,Zr,2,2,"option",6),r.qZA(),r.qZA(),r.YNc(8,Pr,1,1,"scenarii-form-error",7),r.qZA()),2&t){const e=r.oxw();r.Q6J("formGroup",e.form),r.xp6(2),r.Q6J("for",e.fieldName),r.xp6(1),r.Oqu(e.label),r.xp6(1),r.Q6J("name",e.fieldName)("formControlName",e.fieldName),r.xp6(3),r.Q6J("ngForOf",e.columns),r.xp6(1),r.Q6J("ngIf",e.errorMessage)}}let qr=(()=>{class t{constructor(){this.fieldName=null,this.label="",this.form=null,this.control=null,this.errorMessage=null,this.columns=[]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["scenarii-csv-configurator-field"]],inputs:{fieldName:"fieldName",label:"label",form:"form",control:"control",errorMessage:"errorMessage",columns:"columns"},decls:1,vars:1,consts:[["class","mb-3",3,"formGroup",4,"ngIf"],[1,"mb-3",3,"formGroup"],[1,"grid","grid-cols-4","gap-2"],[3,"for"],[1,"col-span-3","focus:ring-gray-500","focus:border-gray-500","flex-1","block","w-full","rounded","sm:text-sm","border-gray-300",3,"name","formControlName"],["value",""],[3,"value",4,"ngFor","ngForOf"],["errorName","required","message","You must set a column name for the identifier.",3,"control",4,"ngIf"],[3,"value"],["errorName","required","message","You must set a column name for the identifier.",3,"control"]],template:function(e,i){1&e&&r.YNc(0,Br,9,7,"div",0),2&e&&r.Q6J("ngIf",i.fieldName&&i.control&&i.form)},directives:[Y.O5,X,xe,Je,q,Ye,kt,Rt,Y.sg,ln],styles:[""]}),t})();function Lr(t,n){if(1&t){const e=r.EpF();r.TgZ(0,"form",2),r.NdJ("ngSubmit",function(){return r.CHM(e),r.oxw().onSubmit()}),r.TgZ(1,"div",3),r.TgZ(2,"div",4),r.TgZ(3,"div"),r.TgZ(4,"h3",5),r._uU(5," Select the matching field from your csv file "),r.qZA(),r.TgZ(6,"p",6),r._uU(7," For each needed field, select a column name from your csv. "),r.qZA(),r.qZA(),r.TgZ(8,"div",7),r._UZ(9,"scenarii-csv-configurator-field",8),r._UZ(10,"scenarii-csv-configurator-field",9),r._UZ(11,"scenarii-csv-configurator-field",10),r._UZ(12,"scenarii-csv-configurator-field",11),r._UZ(13,"scenarii-csv-configurator-field",12),r._UZ(14,"scenarii-csv-configurator-field",13),r.qZA(),r.qZA(),r.TgZ(15,"div",14),r.TgZ(16,"button",15),r._uU(17," Save "),r.qZA(),r.qZA(),r.qZA(),r.qZA()}if(2&t){const e=r.oxw();r.Q6J("formGroup",e.form),r.xp6(9),r.Q6J("control",e.identifier)("columns",e.columns)("form",e.form),r.xp6(1),r.Q6J("control",e.message)("columns",e.columns)("form",e.form),r.xp6(1),r.Q6J("control",e.category)("columns",e.columns)("form",e.form),r.xp6(1),r.Q6J("control",e.subcategory)("columns",e.columns)("form",e.form),r.xp6(1),r.Q6J("control",e.dependency)("columns",e.columns)("form",e.form),r.xp6(1),r.Q6J("control",e.comment)("columns",e.columns)("form",e.form),r.xp6(2),r.Q6J("disabled",!e.form.valid)}}function jr(t,n){if(1&t){const e=r.EpF();r.TgZ(0,"div",3),r.TgZ(1,"div",4),r._uU(2," Your CSV file has no column. Please upload a CSV file with at least one column. "),r.qZA(),r.TgZ(3,"div",14),r.TgZ(4,"button",16),r.NdJ("click",function(){return r.CHM(e),r.oxw().onClear()}),r._uU(5," Cancel "),r.qZA(),r.qZA(),r.qZA()}}let Hr=(()=>{class t{constructor(e,i){this.scenarioConverter=i,this.csvContent=null,this.configurationUpdated=new r.vpe,this.scenarios=new r.vpe,this.cleared=new r.vpe,this.columns=[],this.form=e.group({identifier:["",u.required],message:["",u.required],category:[""],subcategory:[""],dependency:[""],comment:[""]})}get identifier(){return this.form.get("identifier")}get message(){return this.form.get("message")}get category(){return this.form.get("category")}get subcategory(){return this.form.get("subcategory")}get dependency(){return this.form.get("dependency")}get comment(){return this.form.get("comment")}ngOnChanges(e){!e.csvContent||(this.columns=Object.keys((this.csvContent||[])[0]).sort(),this.form.setValue({identifier:this.getFieldIfExisting(this.columns,"id"),message:this.getFieldIfExisting(this.columns,"message"),category:this.getFieldIfExisting(this.columns,"category"),subcategory:this.getFieldIfExisting(this.columns,"subcategory"),dependency:this.getFieldIfExisting(this.columns,"dependency"),comment:this.getFieldIfExisting(this.columns,"comment")}))}onClear(){this.cleared.next()}onSubmit(){var e,i,o,s,c,V;this.configurationUpdated.next({columns:{identifier:null===(e=this.identifier)||void 0===e?void 0:e.value,message:null===(i=this.message)||void 0===i?void 0:i.value,category:null===(o=this.category)||void 0===o?void 0:o.value,subcategory:null===(s=this.subcategory)||void 0===s?void 0:s.value,dependency:null===(c=this.dependency)||void 0===c?void 0:c.value,comment:null===(V=this.comment)||void 0===V?void 0:V.value}}),this.scenarios.next(this.scenarioConverter.convertToScenarios(this.csvContent||[]))}getFieldIfExisting(e,i){return e.includes(i)?i:""}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(ht),r.Y36(Gr))},t.\u0275cmp=r.Xpm({type:t,selectors:[["scenarii-csv-configurator"]],inputs:{csvContent:"csvContent"},outputs:{configurationUpdated:"configurationUpdated",scenarios:"scenarios",cleared:"cleared"},features:[r.TTD],decls:3,vars:2,consts:[[3,"formGroup","ngSubmit",4,"ngIf","ngIfElse"],["noColumns",""],[3,"formGroup","ngSubmit"],[1,"shadow","sm:rounded-md","sm:overflow-hidden"],[1,"px-4","py-5","bg-white","sm:p-6","space-y-6"],[1,"text-lg","font-medium","leading-6","text-gray-900"],[1,"text-sm","text-gray-500","mt-1","italic"],[1,"mt-3"],["label","Identifier","fieldName","identifier","errorMessage","You must set a column name for the identifier.",3,"control","columns","form"],["label","Message","fieldName","message","errorMessage","You must set a column name for the message.",3,"control","columns","form"],["label","Category","fieldName","category",3,"control","columns","form"],["label","Subcategory","fieldName","subcategory",3,"control","columns","form"],["label","Denpendency","fieldName","dependency",3,"control","columns","form"],["label","Comment","fieldName","comment",3,"control","columns","form"],[1,"px-4","py-3","bg-gray-50","text-right","sm:px-6"],["type","submit",1,"inline-flex","justify-center","py-2","px-4","border","border-transparent","shadow-sm","text-sm","font-medium","rounded-md","text-white","bg-gray-600","hover:bg-gray-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500","disabled:bg-gray-200",3,"disabled"],["type","button",1,"inline-flex","justify-center","py-2","px-4","border","border-transparent","shadow-sm","text-sm","font-medium","rounded-md","text-white","bg-gray-600","hover:bg-gray-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500","disabled:bg-gray-200",3,"click"]],template:function(e,i){if(1&e&&(r.YNc(0,Lr,18,20,"form",0),r.YNc(1,jr,6,0,"ng-template",null,1,r.W1O)),2&e){const o=r.MAs(2);r.Q6J("ngIf",i.columns.length>0)("ngIfElse",o)}},directives:[Y.O5,He,X,xe,qr],styles:[""]}),t})();var Yr=D(7922);let Jr=(()=>{class t{constructor(e,i,o){this.scenarios=e,this.reports=i,this.configuration=o}onReset(){this.scenarios.reset([]),this.reports.reset([]),this.configuration.reset({columns:{}})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(ft.z),r.Y36(Yr.M),r.Y36(pt.j))},t.\u0275cmp=r.Xpm({type:t,selectors:[["scenarii-reset"]],decls:11,vars:0,consts:[["action","#","method","POST"],[1,"shadow","sm:rounded-md","sm:overflow-hidden"],[1,"px-4","py-5","bg-white","sm:p-6","space-y-6"],[1,"text-lg","font-medium","leading-6","text-gray-900"],[1,"text-sm","text-gray-500","mt-1","italic"],[1,"px-4","py-3","bg-gray-50","text-right","sm:px-6"],["type","submit",1,"inline-flex","justify-center","py-2","px-4","border","border-transparent","shadow-sm","text-sm","font-medium","rounded-md","text-white","bg-gray-600","hover:bg-gray-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-gray-500",3,"click"]],template:function(e,i){1&e&&(r.TgZ(0,"form",0),r.TgZ(1,"div",1),r.TgZ(2,"div",2),r.TgZ(3,"div"),r.TgZ(4,"h3",3),r._uU(5," Reset the scenarios and reports. "),r.qZA(),r.TgZ(6,"p",4),r._uU(7," You will be be able to upload an other file, but you will lose all the current scenarios and reports. "),r.qZA(),r.qZA(),r.qZA(),r.TgZ(8,"div",5),r.TgZ(9,"button",6),r.NdJ("click",function(){return i.onReset()}),r._uU(10," Reset "),r.qZA(),r.qZA(),r.qZA(),r.qZA())},directives:[He,X],styles:["[_nghost-%COMP%]{display:contents}"]}),t})();function zr(t,n){if(1&t){const e=r.EpF();r.ynx(0),r.TgZ(1,"div",6),r.TgZ(2,"scenarii-csv-uploader",7),r.NdJ("csvUploaded",function(o){return r.CHM(e),r.oxw(2).currentFile=o}),r.qZA(),r._UZ(3,"scenarii-file-history"),r.qZA(),r.BQk()}}function Wr(t,n){if(1&t){const e=r.EpF();r.TgZ(0,"scenarii-csv-configurator",8),r.NdJ("cleared",function(){return r.CHM(e),r.oxw(2).onClear()})("configurationUpdated",function(o){return r.CHM(e),r.oxw(2).onConfigurationUpdated(o)})("scenarios",function(o){return r.CHM(e),r.oxw(2).onScenarios(o)}),r.qZA()}if(2&t){const e=r.oxw(2);r.Q6J("csvContent",e.currentFile)}}function Qr(t,n){if(1&t&&(r.ynx(0),r.YNc(1,zr,4,0,"ng-container",3),r.YNc(2,Wr,1,1,"ng-template",null,5,r.W1O),r.BQk()),2&t){const e=r.MAs(3),i=r.oxw();r.xp6(1),r.Q6J("ngIf",!i.currentFile)("ngIfElse",e)}}function $r(t,n){1&t&&r._UZ(0,"scenarii-reset")}const Xr=[{path:"",component:(()=>{class t{constructor(e,i){this.scenarios=e,this.csvConfiguration=i,this.currentFile=null,this.isRunning=!1,this.isRunning=this.scenarios.getAll().length>0}onScenarios(e){this.currentFile=null,this.scenarios.reset(e),this.isRunning=!0}onConfigurationUpdated(e){this.csvConfiguration.reset(e)}onClear(){this.currentFile=null}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(ft.z),r.Y36(pt.j))},t.\u0275cmp=r.Xpm({type:t,selectors:[["scenarii-loader"]],decls:8,vars:2,consts:[[1,"flex","flex-col","flex-auto"],[1,"p-3","flex-auto"],[3,"isRunning"],[4,"ngIf","ngIfElse"],["reset",""],["csvConfigurator",""],[1,"md:grid","md:grid-cols-2","md:gap-6"],[3,"csvUploaded"],[3,"csvContent","cleared","configurationUpdated","scenarios"]],template:function(e,i){if(1&e&&(r.TgZ(0,"div",0),r.TgZ(1,"scenarii-title"),r._uU(2,"Load a file"),r.qZA(),r.TgZ(3,"main",1),r.TgZ(4,"scenarii-status",2),r.NdJ("isRunning",function(s){return i.isRunning=s}),r.qZA(),r.YNc(5,Qr,4,2,"ng-container",3),r.YNc(6,$r,1,0,"ng-template",null,4,r.W1O),r.qZA(),r.qZA()),2&e){const o=r.MAs(7);r.xp6(5),r.Q6J("ngIf",!i.isRunning)("ngIfElse",o)}},directives:[Hn.r,zn,Y.O5,ye,Ur,Hr,Jr],styles:["[_nghost-%COMP%]{display:contents}"]}),t})()}];let Kr=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[he.Bz.forChild(Xr)],he.Bz]}),t})(),ei=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[Y.ez,jn.m,Kr,Yt]]}),t})()},3028:function(_t,Ie){var D,r;D=function ve(){"use strict";var N="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==N?N:{},ce=!N.document&&!!N.postMessage,Ce=ce&&/blob:/i.test((N.location||{}).protocol),be={},Re=0,y={parse:function(l,a){var u=(a=a||{}).dynamicTyping||!1;if(b(u)&&(a.dynamicTypingFunction=u,u={}),a.dynamicTyping=u,a.transform=!!b(a.transform)&&a.transform,a.worker&&y.WORKERS_SUPPORTED){var h=function(){if(!y.WORKERS_SUPPORTED)return!1;var Z,T,v=(Z=N.URL||N.webkitURL||null,T=ve.toString(),y.BLOB_URL||(y.BLOB_URL=Z.createObjectURL(new Blob(["(",T,")();"],{type:"text/javascript"})))),w=new N.Worker(v);return w.onmessage=$e,w.id=Re++,be[w.id]=w}();return h.userStep=a.step,h.userChunk=a.chunk,h.userComplete=a.complete,h.userError=a.error,a.step=b(a.step),a.chunk=b(a.chunk),a.complete=b(a.complete),a.error=b(a.error),delete a.worker,void h.postMessage({input:l,config:a,workerId:h.id})}var f=null;return"string"==typeof l?f=a.download?new pe(a):new K(a):!0===l.readable&&b(l.read)&&b(l.on)?f=new $(a):(N.File&&l instanceof File||l instanceof Object)&&(f=new ge(a)),f.stream(l)},unparse:function(l,a){var u=!1,h=!0,f=",",v="\r\n",w='"',Z=w+w,T=!1,p=null,k=!1;!function(){if("object"==typeof a){if("string"!=typeof a.delimiter||y.BAD_DELIMITERS.filter(function(d){return-1!==a.delimiter.indexOf(d)}).length||(f=a.delimiter),("boolean"==typeof a.quotes||"function"==typeof a.quotes||Array.isArray(a.quotes))&&(u=a.quotes),"boolean"!=typeof a.skipEmptyLines&&"string"!=typeof a.skipEmptyLines||(T=a.skipEmptyLines),"string"==typeof a.newline&&(v=a.newline),"string"==typeof a.quoteChar&&(w=a.quoteChar),"boolean"==typeof a.header&&(h=a.header),Array.isArray(a.columns)){if(0===a.columns.length)throw new Error("Option columns is empty");p=a.columns}void 0!==a.escapeChar&&(Z=a.escapeChar+w),"boolean"==typeof a.escapeFormulae&&(k=a.escapeFormulae)}}();var m=new RegExp(de(w),"g");if("string"==typeof l&&(l=JSON.parse(l)),Array.isArray(l)){if(!l.length||Array.isArray(l[0]))return ee(null,l,T);if("object"==typeof l[0])return ee(p||Object.keys(l[0]),l,T)}else if("object"==typeof l)return"string"==typeof l.data&&(l.data=JSON.parse(l.data)),Array.isArray(l.data)&&(l.fields||(l.fields=l.meta&&l.meta.fields),l.fields||(l.fields=Array.isArray(l.data[0])?l.fields:"object"==typeof l.data[0]?Object.keys(l.data[0]):[]),Array.isArray(l.data[0])||"object"==typeof l.data[0]||(l.data=[l.data])),ee(l.fields||[],l.data||[],T);throw new Error("Unable to serialize unrecognized input");function ee(d,F,I){var j="";"string"==typeof d&&(d=JSON.parse(d)),"string"==typeof F&&(F=JSON.parse(F));var P=Array.isArray(d)&&0<d.length,R=!Array.isArray(F[0]);if(P&&h){for(var G=0;G<d.length;G++)0<G&&(j+=f),j+=L(d[G],G);0<F.length&&(j+=v)}for(var g=0;g<F.length;g++){var E=P?d.length:F[g].length,O=!1,S=P?0===Object.keys(F[g]).length:0===F[g].length;if(I&&!P&&(O="greedy"===I?""===F[g].join("").trim():1===F[g].length&&0===F[g][0].length),"greedy"===I&&P){for(var x=[],A=0;A<E;A++)x.push(F[g][R?d[A]:A]);O=""===x.join("").trim()}if(!O){for(var _=0;_<E;_++)0<_&&!S&&(j+=f),j+=L(F[g][P&&R?d[_]:_],_);g<F.length-1&&(!I||0<E&&!S)&&(j+=v)}}return j}function L(d,F){if(null==d)return"";if(d.constructor===Date)return JSON.stringify(d).slice(1,25);!0===k&&"string"==typeof d&&null!==d.match(/^[=+\-@].*$/)&&(d="'"+d);var I=d.toString().replace(m,Z);return"boolean"==typeof u&&u||"function"==typeof u&&u(d,F)||Array.isArray(u)&&u[F]||function(P,R){for(var G=0;G<R.length;G++)if(-1<P.indexOf(R[G]))return!0;return!1}(I,y.BAD_DELIMITERS)||-1<I.indexOf(f)||" "===I.charAt(0)||" "===I.charAt(I.length-1)?w+I+w:I}}};if(y.RECORD_SEP=String.fromCharCode(30),y.UNIT_SEP=String.fromCharCode(31),y.BYTE_ORDER_MARK="\ufeff",y.BAD_DELIMITERS=["\r","\n",'"',y.BYTE_ORDER_MARK],y.WORKERS_SUPPORTED=!ce&&!!N.Worker,y.NODE_STREAM_INPUT=1,y.LocalChunkSize=10485760,y.RemoteChunkSize=5242880,y.DefaultDelimiter=",",y.Parser=Me,y.ParserHandle=Ue,y.NetworkStreamer=pe,y.FileStreamer=ge,y.StringStreamer=K,y.ReadableStreamStreamer=$,N.jQuery){var fe=N.jQuery;fe.fn.parse=function(l){var a=l.config||{},u=[];return this.each(function(v){if("INPUT"!==fe(this).prop("tagName").toUpperCase()||"file"!==fe(this).attr("type").toLowerCase()||!N.FileReader||!this.files||0===this.files.length)return!0;for(var w=0;w<this.files.length;w++)u.push({file:this.files[w],inputElem:this,instanceConfig:fe.extend({},a)})}),h(),this;function h(){if(0!==u.length){var w,Z,T,p=u[0];if(b(l.before)){var k=l.before(p.file,p.inputElem);if("object"==typeof k){if("abort"===k.action)return"AbortError",w=p.file,Z=p.inputElem,T=k.reason,void(b(l.error)&&l.error({name:"AbortError"},w,Z,T));if("skip"===k.action)return void f();"object"==typeof k.config&&(p.instanceConfig=fe.extend(p.instanceConfig,k.config))}else if("skip"===k)return void f()}var m=p.instanceConfig.complete;p.instanceConfig.complete=function(ee){b(m)&&m(ee,p.file,p.inputElem),f()},y.parse(p.file,p.instanceConfig)}else b(l.complete)&&l.complete()}function f(){u.splice(0,1),h()}}}function re(l){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(a){var u=ne(a);u.chunkSize=parseInt(u.chunkSize),a.step||a.chunk||(u.chunkSize=null),this._handle=new Ue(u),(this._handle.streamer=this)._config=u}.call(this,l),this.parseChunk=function(a,u){if(this.isFirstChunk&&b(this._config.beforeFirstChunk)){var h=this._config.beforeFirstChunk(a);void 0!==h&&(a=h)}this.isFirstChunk=!1,this._halted=!1;var f=this._partialLine+a;this._partialLine="";var v=this._handle.parse(f,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var w=v.meta.cursor;this._finished||(this._partialLine=f.substring(w-this._baseIndex),this._baseIndex=w),v&&v.data&&(this._rowCount+=v.data.length);var Z=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(Ce)N.postMessage({results:v,workerId:y.WORKER_ID,finished:Z});else if(b(this._config.chunk)&&!u){if(this._config.chunk(v,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);v=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(v.data),this._completeResults.errors=this._completeResults.errors.concat(v.errors),this._completeResults.meta=v.meta),this._completed||!Z||!b(this._config.complete)||v&&v.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),Z||v&&v.meta.paused||this._nextChunk(),v}this._halted=!0},this._sendError=function(a){b(this._config.error)?this._config.error(a):Ce&&this._config.error&&N.postMessage({workerId:y.WORKER_ID,error:a,finished:!1})}}function pe(l){var a;(l=l||{}).chunkSize||(l.chunkSize=y.RemoteChunkSize),re.call(this,l),this._nextChunk=ce?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(u){this._input=u,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(a=new XMLHttpRequest,this._config.withCredentials&&(a.withCredentials=this._config.withCredentials),ce||(a.onload=ie(this._chunkLoaded,this),a.onerror=ie(this._chunkError,this)),a.open(this._config.downloadRequestBody?"POST":"GET",this._input,!ce),this._config.downloadRequestHeaders){var u=this._config.downloadRequestHeaders;for(var h in u)a.setRequestHeader(h,u[h])}this._config.chunkSize&&a.setRequestHeader("Range","bytes="+this._start+"-"+(this._start+this._config.chunkSize-1));try{a.send(this._config.downloadRequestBody)}catch(v){this._chunkError(v.message)}ce&&0===a.status&&this._chunkError()}},this._chunkLoaded=function(){var h;4===a.readyState&&(a.status<200||400<=a.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:a.responseText.length,this._finished=!this._config.chunkSize||this._start>=(null===(h=a.getResponseHeader("Content-Range"))?-1:parseInt(h.substring(h.lastIndexOf("/")+1))),this.parseChunk(a.responseText)))},this._chunkError=function(u){this._sendError(new Error(a.statusText||u))}}function ge(l){var a,u;(l=l||{}).chunkSize||(l.chunkSize=y.LocalChunkSize),re.call(this,l);var h="undefined"!=typeof FileReader;this.stream=function(f){this._input=f,u=f.slice||f.webkitSlice||f.mozSlice,h?((a=new FileReader).onload=ie(this._chunkLoaded,this),a.onerror=ie(this._chunkError,this)):a=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var f=this._input;if(this._config.chunkSize){var v=Math.min(this._start+this._config.chunkSize,this._input.size);f=u.call(f,this._start,v)}var w=a.readAsText(f,this._config.encoding);h||this._chunkLoaded({target:{result:w}})},this._chunkLoaded=function(f){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(f.target.result)},this._chunkError=function(){this._sendError(a.error)}}function K(l){var a;re.call(this,l=l||{}),this.stream=function(u){return a=u,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var u,h=this._config.chunkSize;return h?(u=a.substring(0,h),a=a.substring(h)):(u=a,a=""),this._finished=!a,this.parseChunk(u)}}}function $(l){re.call(this,l=l||{});var a=[],u=!0,h=!1;this.pause=function(){re.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){re.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(f){this._input=f,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){h&&1===a.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),a.length?this.parseChunk(a.shift()):u=!0},this._streamData=ie(function(f){try{a.push("string"==typeof f?f:f.toString(this._config.encoding)),u&&(u=!1,this._checkIsFinished(),this.parseChunk(a.shift()))}catch(v){this._streamError(v)}},this),this._streamError=ie(function(f){this._streamCleanUp(),this._sendError(f)},this),this._streamEnd=ie(function(){this._streamCleanUp(),h=!0,this._streamData("")},this),this._streamCleanUp=ie(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function Ue(l){var a,u,h,f=Math.pow(2,53),v=-f,w=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,Z=/^(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))$/,T=this,p=0,k=0,m=!1,ee=!1,L=[],d={data:[],errors:[],meta:{}};if(b(l.step)){var F=l.step;l.step=function(g){if(d=g,P())j();else{if(j(),0===d.data.length)return;p+=g.data.length,l.preview&&p>l.preview?u.abort():(d.data=d.data[0],F(d,T))}}}function I(g){return"greedy"===l.skipEmptyLines?""===g.join("").trim():1===g.length&&0===g[0].length}function j(){if(d&&h&&(G("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+y.DefaultDelimiter+"'"),h=!1),l.skipEmptyLines)for(var g=0;g<d.data.length;g++)I(d.data[g])&&d.data.splice(g--,1);return P()&&function(){if(d)if(Array.isArray(d.data[0])){for(var O=0;P()&&O<d.data.length;O++)d.data[O].forEach(E);d.data.splice(0,1)}else d.data.forEach(E);function E(S,x){b(l.transformHeader)&&(S=l.transformHeader(S,x)),L.push(S)}}(),function(){if(!d||!l.header&&!l.dynamicTyping&&!l.transform)return d;function E(S,x){var A,U=l.header?{}:[];for(A=0;A<S.length;A++){var _=A,J=S[A];l.header&&(_=A>=L.length?"__parsed_extra":L[A]),l.transform&&(J=l.transform(J,_)),J=R(_,J),"__parsed_extra"===_?(U[_]=U[_]||[],U[_].push(J)):U[_]=J}return l.header&&(A>L.length?G("FieldMismatch","TooManyFields","Too many fields: expected "+L.length+" fields but parsed "+A,k+x):A<L.length&&G("FieldMismatch","TooFewFields","Too few fields: expected "+L.length+" fields but parsed "+A,k+x)),U}var O=1;return!d.data.length||Array.isArray(d.data[0])?(d.data=d.data.map(E),O=d.data.length):d.data=E(d.data,0),l.header&&d.meta&&(d.meta.fields=L),k+=O,d}()}function P(){return l.header&&0===L.length}function R(g,E){return O=g,l.dynamicTypingFunction&&void 0===l.dynamicTyping[O]&&(l.dynamicTyping[O]=l.dynamicTypingFunction(O)),!0===(l.dynamicTyping[O]||l.dynamicTyping)?"true"===E||"TRUE"===E||"false"!==E&&"FALSE"!==E&&(function(S){if(w.test(S)){var x=parseFloat(S);if(v<x&&x<f)return!0}return!1}(E)?parseFloat(E):Z.test(E)?new Date(E):""===E?null:E):E;var O}function G(g,E,O,S){var x={type:g,code:E,message:O};void 0!==S&&(x.row=S),d.errors.push(x)}this.parse=function(g,E,O){if(l.newline||(l.newline=function(U,_){U=U.substring(0,1048576);var J=new RegExp(de(_)+"([^]*?)"+de(_),"gm"),B=(U=U.replace(J,"")).split("\r"),M=U.split("\n");if(1===B.length||1<M.length&&M[0].length<B[0].length)return"\n";for(var se=0,te=0;te<B.length;te++)"\n"===B[te][0]&&se++;return se>=B.length/2?"\r\n":"\r"}(g,l.quoteChar||'"')),h=!1,l.delimiter)b(l.delimiter)&&(l.delimiter=l.delimiter(g),d.meta.delimiter=l.delimiter);else{var x=function(U,_,J,B,M){var oe,se,te,q;M=M||[",","\t","|",";",y.RECORD_SEP,y.UNIT_SEP];for(var X=0;X<M.length;X++){var H=M[X],ae=0,le=0,Ae=0;te=void 0;for(var _e=new Me({comments:B,delimiter:H,newline:_,preview:10}).parse(U),Oe=0;Oe<_e.data.length;Oe++)if(J&&I(_e.data[Oe]))Ae++;else{var Ve=_e.data[Oe].length;le+=Ve,void 0!==te?0<Ve&&(ae+=Math.abs(Ve-te),te=Ve):te=Ve}0<_e.data.length&&(le/=_e.data.length-Ae),(void 0===se||ae<=se)&&(void 0===q||q<le)&&1.99<le&&(se=ae,oe=H,q=le)}return{successful:!!(l.delimiter=oe),bestDelimiter:oe}}(g,l.newline,l.skipEmptyLines,l.comments,l.delimitersToGuess);x.successful?l.delimiter=x.bestDelimiter:(h=!0,l.delimiter=y.DefaultDelimiter),d.meta.delimiter=l.delimiter}var A=ne(l);return l.preview&&l.header&&A.preview++,a=g,u=new Me(A),d=u.parse(a,E,O),j(),m?{meta:{paused:!0}}:d||{meta:{paused:!1}}},this.paused=function(){return m},this.pause=function(){m=!0,u.abort(),a=b(l.chunk)?"":a.substring(u.getCharIndex())},this.resume=function(){T.streamer._halted?(m=!1,T.streamer.parseChunk(a,!0)):setTimeout(T.resume,3)},this.aborted=function(){return ee},this.abort=function(){ee=!0,u.abort(),d.meta.aborted=!0,b(l.complete)&&l.complete(d),a=""}}function de(l){return l.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Me(l){var a,u=(l=l||{}).delimiter,h=l.newline,f=l.comments,v=l.step,w=l.preview,Z=l.fastMode,T=a=void 0===l.quoteChar?'"':l.quoteChar;if(void 0!==l.escapeChar&&(T=l.escapeChar),("string"!=typeof u||-1<y.BAD_DELIMITERS.indexOf(u))&&(u=","),f===u)throw new Error("Comment character same as delimiter");!0===f?f="#":("string"!=typeof f||-1<y.BAD_DELIMITERS.indexOf(f))&&(f=!1),"\n"!==h&&"\r"!==h&&"\r\n"!==h&&(h="\n");var p=0,k=!1;this.parse=function(m,ee,L){if("string"!=typeof m)throw new Error("Input must be a string");var d=m.length,F=u.length,I=h.length,j=f.length,P=b(v),R=[],G=[],g=[],E=p=0;if(!m)return q();if(Z||!1!==Z&&-1===m.indexOf(a)){for(var O=m.split(h),S=0;S<O.length;S++){if(p+=(g=O[S]).length,S!==O.length-1)p+=h.length;else if(L)return q();if(!f||g.substring(0,j)!==f){if(P){if(R=[],M(g.split(u)),X(),k)return q()}else M(g.split(u));if(w&&w<=S)return R=R.slice(0,w),q(!0)}}return q()}for(var x=m.indexOf(u,p),A=m.indexOf(h,p),U=new RegExp(de(T)+de(a),"g"),_=m.indexOf(a,p);;)if(m[p]!==a)if(f&&0===g.length&&m.substring(p,p+j)===f){if(-1===A)return q();A=m.indexOf(h,p=A+I),x=m.indexOf(u,p)}else if(-1!==x&&(x<A||-1===A))g.push(m.substring(p,x)),x=m.indexOf(u,p=x+F);else{if(-1===A)break;if(g.push(m.substring(p,A)),te(A+I),P&&(X(),k))return q();if(w&&R.length>=w)return q(!0)}else for(_=p,p++;;){if(-1===(_=m.indexOf(a,_+1)))return L||G.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:R.length,index:p}),se();if(_===d-1)return se(m.substring(p,_).replace(U,a));if(a!==T||m[_+1]!==T){if(a===T||0===_||m[_-1]!==T){-1!==x&&x<_+1&&(x=m.indexOf(u,_+1)),-1!==A&&A<_+1&&(A=m.indexOf(h,_+1));var J=oe(-1===A?x:Math.min(x,A));if(m[_+1+J]===u){g.push(m.substring(p,_).replace(U,a)),m[p=_+1+J+F]!==a&&(_=m.indexOf(a,p)),x=m.indexOf(u,p),A=m.indexOf(h,p);break}var B=oe(A);if(m.substring(_+1+B,_+1+B+I)===h){if(g.push(m.substring(p,_).replace(U,a)),te(_+1+B+I),x=m.indexOf(u,p),_=m.indexOf(a,p),P&&(X(),k))return q();if(w&&R.length>=w)return q(!0);break}G.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:R.length,index:p}),_++}}else _++}return se();function M(H){R.push(H),E=p}function oe(H){var ae=0;if(-1!==H){var le=m.substring(_+1,H);le&&""===le.trim()&&(ae=le.length)}return ae}function se(H){return L||(void 0===H&&(H=m.substring(p)),g.push(H),p=d,M(g),P&&X()),q()}function te(H){p=H,M(g),g=[],A=m.indexOf(h,p)}function q(H){return{data:R,errors:G,meta:{delimiter:u,linebreak:h,aborted:k,truncated:!!H,cursor:E+(ee||0)}}}function X(){v(q()),R=[],G=[]}},this.abort=function(){k=!0},this.getCharIndex=function(){return p}}function $e(l){var a=l.data,u=be[a.workerId],h=!1;if(a.error)u.userError(a.error,a.file);else if(a.results&&a.results.data){var f={abort:function(){h=!0,Ge(a.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:me,resume:me};if(b(u.userStep)){for(var v=0;v<a.results.data.length&&(u.userStep({data:a.results.data[v],errors:a.results.errors,meta:a.results.meta},f),!h);v++);delete a.results}else b(u.userChunk)&&(u.userChunk(a.results,f,a.file),delete a.results)}a.finished&&!h&&Ge(a.workerId,a.results)}function Ge(l,a){var u=be[l];b(u.userComplete)&&u.userComplete(a),u.terminate(),delete be[l]}function me(){throw new Error("Not implemented.")}function ne(l){if("object"!=typeof l||null===l)return l;var a=Array.isArray(l)?[]:{};for(var u in l)a[u]=ne(l[u]);return a}function ie(l,a){return function(){l.apply(a,arguments)}}function b(l){return"function"==typeof l}return Ce&&(N.onmessage=function(l){var a=l.data;if(void 0===y.WORKER_ID&&a&&(y.WORKER_ID=a.workerId),"string"==typeof a.input)N.postMessage({workerId:y.WORKER_ID,results:y.parse(a.input,a.config),finished:!0});else if(N.File&&a.input instanceof File||a.input instanceof Object){var u=y.parse(a.input,a.config);u&&N.postMessage({workerId:y.WORKER_ID,results:u,finished:!0})}}),(pe.prototype=Object.create(re.prototype)).constructor=pe,(ge.prototype=Object.create(re.prototype)).constructor=ge,(K.prototype=Object.create(K.prototype)).constructor=K,($.prototype=Object.create(re.prototype)).constructor=$,y},void 0!==(r=D.apply(Ie,[]))&&(_t.exports=r)}}]);